{"version":3,"file":"vue.js","sources":["../src/utils/index.js","../src/observe/array.js","../src/observe/index.js","../src/initState.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isObject(data) {\r\n  return data !== null && typeof data === 'object'\r\n}\r\n","let oldArrayMethods = Array.prototype\r\n\r\nexport let ArrayMethods = Object.create(oldArrayMethods)\r\nlet methods = ['push', 'pop', 'unshift', 'shift', 'splice', 'sort', 'reverse']\r\n\r\nfor (let method in methods) {\r\n  ArrayMethods[method] = function (...args) {\r\n    let result = oldArrayMethods[method].apply(this, args)\r\n    let inserted // 新增的值\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    if (inserted) {\r\n      this.__ob__.observeArray(inserted)\r\n    }\r\n    return result\r\n  }\r\n}\r\n","import { isObject } from '../utils/index'\r\nimport { ArrayMethods } from './array'\r\n\r\nexport function observer(data) {\r\n  if (isObject(data)) {\r\n    return data\r\n  }\r\n  return new Observer(data)\r\n}\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    Object.defineProperty(value, '__ob__', {\r\n      enumerable: false,\r\n      value: this\r\n    })\r\n    if (Array.isArray(value)) {\r\n      value.__proto__ = ArrayMethods\r\n      this.observerArray(value)\r\n    } else {\r\n      this.walk(value)\r\n    }\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data)\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i]\r\n      defineReactive(data, key, data[key])\r\n    }\r\n  }\r\n  observerArray(data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      observer(data[i])\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  observer(value)\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      return value\r\n    },\r\n    set(newVal) {\r\n      if (value === newVal) return\r\n      observer(newVal)\r\n      value = newVal\r\n    }\r\n  })\r\n}\r\n","import { observer } from './observe/index'\r\nimport { isObject } from './utils/index'\r\n\r\nexport function initState(vm) {\r\n  let options = vm.$options\r\n  if (options.data) {\r\n    initData(vm)\r\n  }\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data\r\n  if (isObject(data)) {\r\n    data = data\r\n  } else if (typeof data === 'function') {\r\n    data = data.call(vm)\r\n  } else {\r\n    console.error('data type error')\r\n    return false\r\n  }\r\n  vm._data = data\r\n\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n\r\n  observer(data)\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newVal) {\r\n      return (vm[source][key] = newVal)\r\n    }\r\n  })\r\n}\r\n","import { initState } from './initState'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype.__init = function (options) {\r\n    let vm = this\r\n    vm.$options = options\r\n    initState(vm)\r\n  }\r\n}\r\n","import { initMixin } from './init'\r\n\r\nfunction Vue(options) {\r\n  this.__init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\nexport default Vue\r\n"],"names":["isObject","data","oldArrayMethods","Array","prototype","ArrayMethods","Object","create","methods","method","args","result","apply","inserted","slice","__ob__","observeArray","observer","Observer","value","defineProperty","enumerable","isArray","__proto__","observerArray","walk","keys","i","length","key","defineReactive","get","set","newVal","initState","vm","options","$options","initData","call","console","error","_data","proxy","source","initMixin","Vue","__init"],"mappings":"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"}