{"version":3,"file":"vue.js","sources":["../src/utils/index.js","../src/global-api/index.js","../src/compile/parseAst.js","../src/compile/generate.js","../src/compile/index.js","../src/observe/arr.js","../src/observe/index.js","../src/initState.js","../src/vnode/patch.js","../src/lifecycle.js","../src/init.js","../src/vnode/index.js","../src/index.js"],"sourcesContent":["export const HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestory',\r\n  'destroyed'\r\n]\r\n// 策略模式\r\nlet starts = {}\r\n\r\nstarts.data = function (parentVal, childVal) {\r\n  // 合并data\r\n  return childVal\r\n}\r\nstarts.computed = function () {\r\n  // 合并computed\r\n}\r\nstarts.watch = function () {\r\n  // 合并watch\r\n}\r\n\r\nHOOKS.forEach((hooks) => {\r\n  starts[hooks] = mergeHook\r\n})\r\n\r\nfunction mergeHook(parentVal, childVal) {\r\n  // console.log(parentVal, childVal)\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal)\r\n    } else {\r\n      return [childVal]\r\n    }\r\n  } else {\r\n    return parentVal\r\n  }\r\n}\r\n\r\nexport function mergeOptions(parent, child) {\r\n  // 合并对象\r\n  // console.log(parent, child)\r\n  const options = {}\r\n  // 父亲\r\n  for (let key in parent) {\r\n    mergeField(key)\r\n  }\r\n  // 儿子有\r\n  for (let key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key)\r\n    }\r\n  }\r\n  function mergeField(key) {\r\n    // 策略模式\r\n    if (starts[key]) {\r\n      options[key] = starts[key](parent[key], child[key])\r\n    } else {\r\n      options[key] = child[key] || parent[key]\r\n    }\r\n  }\r\n  // console.log('options', options)\r\n  return options\r\n}\r\n","import { mergeOptions } from '../utils/index'\r\n\r\nexport function initGlobApi(Vue) {\r\n  // created:[a,b,c]\r\n  // watch:[a,b]\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin) {\r\n    // console.log(this)\r\n    // 对象的合并\r\n    // console.log(Vue.options)\r\n    // console.log(mixin)\r\n    this.options = mergeOptions(this.options, mixin)\r\n    // console.log(this.options)\r\n    return this\r\n  }\r\n}\r\n","// 标签名\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\n// <span:xx>\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\n// 开始标签\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\n// 结束标签\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\n// 属性  第一个分组是属性的key  value在分组 3/4/5中\r\nconst attribute =\r\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\n// <br/>\r\nconst startTagClose = /^\\s*(\\/?)>/\r\n// {{}}\r\nexport const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\n// 创建一个ast对象\r\nfunction createASTElement(tag, attrs) {\r\n  return {\r\n    tag, //元素\r\n    attrs, //属性\r\n    children: [], //子节点\r\n    type: 1, //元素类型(标签 1)\r\n    parent: null\r\n  }\r\n}\r\n\r\nlet root //根元素\r\nlet currentParent //当前的父亲\r\nlet stack = []\r\n\r\nfunction start(tag, attrs) {\r\n  // 开始标签\r\n  // console.log('开始标签', tag, attrs)\r\n  let element = createASTElement(tag, attrs)\r\n  if (!root) {\r\n    root = element\r\n  }\r\n  currentParent = element\r\n  stack.push(element)\r\n}\r\nfunction charts(text) {\r\n  // 文本\r\n  // console.log('文本', text)\r\n  text = text.replace(/\\s/g, '')\r\n  if (text) {\r\n    currentParent.children.push({\r\n      type: 3, //元素类型(文本 3)\r\n      text\r\n    })\r\n  }\r\n}\r\nfunction end(tag) {\r\n  // 结束标签\r\n  // console.log('结束标签', tag)\r\n  let element = stack.pop()\r\n  currentParent = stack[stack.length - 1]\r\n\r\n  if (currentParent) {\r\n    element.parent = currentParent.tag\r\n    currentParent.children.push(element)\r\n  }\r\n}\r\n\r\nexport function parseHTML(html) {\r\n  while (html) {\r\n    // 判断标签\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      // 1) 开始标签\r\n      const startTagMatch = parseStartTag()\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      // 2) 结束标签\r\n      let endTagMatch = html.match(endTag)\r\n      // console.log(endTagMatch)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n    }\r\n    // 文本\r\n    let text\r\n    if (textEnd > 0) {\r\n      // console.log(textEnd)\r\n      // 获取文本内容\r\n      text = html.substring(0, textEnd)\r\n      charts(text)\r\n      // console.log(text)\r\n    }\r\n    if (text) {\r\n      advance(text.length)\r\n    }\r\n  }\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      // console.log(start)\r\n      // 创建ast语法树\r\n      let match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      // 删除开始标签 <div\r\n      advance(start[0].length)\r\n      let attr, end\r\n      // 处理属性\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        })\r\n        // 删除属性\r\n        advance(attr[0].length)\r\n        // break\r\n      }\r\n      if (end) {\r\n        // 删掉 >\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n  function advance(n) {\r\n    html = html.substring(n)\r\n    // console.log(html)\r\n  }\r\n  // console.log(root)\r\n  return root\r\n}\r\n","/**\r\n *\r\n * <div id=\"app\" class=\"add num\">xin {{msg}}<span>988</span></div>\r\n * _c(div,{id:app},_v('xin' + _s(msg)),_c)\r\n *\r\n *\r\n */\r\n\r\nimport { defaultTagRE } from './parseAst'\r\n\r\n// 处理属性\r\nfunction genPorps(attrs) {\r\n  // console.log(attrs)\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i]\r\n    if (attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').forEach((item) => {\r\n        if (item) {\r\n          let [key, value] = item.split(':')\r\n          obj[key] = value\r\n        }\r\n      })\r\n      // style=\"color:#f00;font-size:20px;\"\r\n      //          ||\r\n      // {color: '#f00', font-size: '20px'}\r\n      attr.value = obj\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`\r\n}\r\n// 处理子节点\r\nfunction genChildren(ast) {\r\n  let children = ast.children\r\n  if (children) {\r\n    return children.map((child) => gen(child)).join(',')\r\n  }\r\n  return null\r\n}\r\nfunction gen(node) {\r\n  // 文本 或者 标签\r\n  if (node.type === 1) {\r\n    // 标签\r\n    return generate(node)\r\n  } else if (node.type === 3) {\r\n    // 文本  （纯文本和插值表达式）\r\n    let text = node.text\r\n    if (!defaultTagRE.test(text)) {\r\n      // 没有插值的纯文本\r\n      return `_v(${JSON.stringify(text)})`\r\n    } else {\r\n      // 有插值表达式\r\n      let tokens = []\r\n      let lastIndex = (defaultTagRE.lastIndex = 0)\r\n      let match\r\n      while ((match = defaultTagRE.exec(text))) {\r\n        // console.log('match', match)\r\n        let index = match.index\r\n        if (index > lastIndex) {\r\n          // 添加内容\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length\r\n      }\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n      }\r\n      // console.log(tokens)\r\n      return `_v(${tokens.join('+')})`\r\n    }\r\n  }\r\n}\r\n\r\nexport function generate(ast) {\r\n  let children = genChildren(ast)\r\n\r\n  let code = `_c('${ast.tag}',${\r\n    ast.attrs.length ? `${genPorps(ast.attrs)}` : undefined\r\n  },${children})`\r\n  // console.log(code)\r\n  return code\r\n}\r\n","import { generate } from './generate'\r\nimport { parseHTML } from './parseAst'\r\n\r\nexport function compileToFunction(el) {\r\n  // console.log(el)\r\n  // 1） 将HTML 变成 ast语法树\r\n  let ast = parseHTML(el)\r\n  // console.log('ast', ast)\r\n  // 2） 将ast语法树变成render函数\r\n  // _c 元素 _v 文本 _s 是表达式\r\n  // 2-1)ast语法树变成字符串\r\n  let code = generate(ast)\r\n  // console.log('code', code)\r\n  // 2-2)字符串变成函数\r\n  let render = new Function(`with(this){return ${code}}`)\r\n  // console.log('render', render)\r\n  return render\r\n}\r\n","// 重写数组方法\r\n\r\n// 1) 获取原来数组的方法\r\nlet oldArrayProtoMethods = Array.prototype\r\n// 2) 继承\r\nexport let ArrayMethods = Object.create(oldArrayProtoMethods)\r\n// 3）函数劫持\r\nlet methods = ['push', 'pop', 'unshift', 'shift', 'splice', 'sort', 'reverse']\r\n\r\nmethods.forEach((method) => {\r\n  ArrayMethods[method] = function (...args) {\r\n    // console.log('数组劫持', args)\r\n    const result = oldArrayProtoMethods[method].apply(this, args)\r\n    // 对数组中新增的数据 进行劫持\r\n    let inserted //新增的内容\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    let ob = this.__ob__\r\n    if (inserted) {\r\n      // 对新增的内容进行劫持\r\n      ob.observeArray(inserted)\r\n    }\r\n    return result\r\n  }\r\n})\r\n","import { ArrayMethods } from './arr'\r\nexport function observer(data) {\r\n  if (typeof data !== 'object' || data === null) {\r\n    // data不是对象或者data为空 不劫持\r\n    return data\r\n  }\r\n\r\n  // console.log('劫持data:', data)\r\n  return new Observer(data)\r\n}\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    // 给 value 添加一个属性\r\n    Object.defineProperty(value, '__ob__', {\r\n      enumerable: false, //不可枚举\r\n      value: this\r\n    })\r\n    // value.__ob__ = this //副作用 给数据加了一个标识上有__ob__ 则说明这个属性被观测过\r\n\r\n    // 判断是不是数组\r\n    if (Array.isArray(value)) {\r\n      console.log('数组', value)\r\n      // 重写数组 的部分方法\r\n      value.__proto__ = ArrayMethods\r\n      // 数组里面包含对象\r\n      this.observeArray(value) //[{a:1}]\r\n    } else {\r\n      this.walk(value)\r\n    }\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data)\r\n    // console.log('keys', keys)\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i]\r\n      const value = data[key]\r\n      // 对每一个属性进行劫持\r\n      defineReactive(data, key, value)\r\n    }\r\n  }\r\n  observeArray(arr) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      observer(arr[i])\r\n    }\r\n  }\r\n}\r\n// 对对象中的属性进行劫持\r\nfunction defineReactive(data, key, value) {\r\n  observer(value) //深度递归劫持\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // console.log('获取', key)\r\n      return value\r\n    },\r\n    set(newVal) {\r\n      // console.log('设置', newVal)\r\n      if (newVal === value) return\r\n      observer(newVal) //对设置的值 进行劫持\r\n      value = newVal\r\n    }\r\n  })\r\n}\r\n","import { observer } from './observe/index'\r\nexport function initState(vm) {\r\n  let ops = vm.$options\r\n  // console.log('ops', ops)\r\n  if (ops.data) {\r\n    initData(vm)\r\n  }\r\n  if (ops.props) {\r\n    initProps()\r\n  }\r\n  if (ops.watch) {\r\n    initWatch()\r\n  }\r\n  if (ops.computed) {\r\n    initComputed()\r\n  }\r\n  if (ops.methods) {\r\n    initMethods()\r\n  }\r\n}\r\n\r\nfunction initData(vm) {\r\n  // console.log('vm:data初始化', vm)\r\n  let data = vm.$options.data\r\n  // 对象或者函数\r\n  if (typeof data === 'object' && data !== null) {\r\n    data = data\r\n  } else if (typeof data === 'function') {\r\n    data = data.call(vm)\r\n  } else {\r\n    console.error('data type error')\r\n    return false\r\n  }\r\n  vm._data = data\r\n\r\n  // 将data上的属性代理到实例上 vm.msg = vm._data.msg\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n  // 对data数据进行劫持\r\n  observer(data)\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newVal) {\r\n      vm[source][key] = newVal\r\n    }\r\n  })\r\n}\r\n\r\nfunction initProps() {}\r\nfunction initWatch() {}\r\nfunction initComputed() {}\r\nfunction initMethods() {}\r\n","export function patch(oldVnode, vnode) {\r\n  // vnode ->真实dom\r\n  // 1）创建新dom\r\n  let el = createEl(vnode)\r\n  // console.log(el)\r\n  // 2) 新dom替换旧dom\r\n  let parentEL = oldVnode.parentNode\r\n  parentEL.insertBefore(el, oldVnode.nextsibling)\r\n  parentEL.removeChild(oldVnode)\r\n  return el\r\n}\r\n// 创建dom\r\nfunction createEl(vnode) {\r\n  let { tag, children, key, data, text } = vnode\r\n  if (typeof tag === 'string') {\r\n    // 是标签  创建元素\r\n    vnode.el = document.createElement(tag)\r\n    patchProps(vnode.el, {}, data)\r\n    if (children.length > 0) {\r\n      children.forEach((child) => {\r\n        vnode.el.appendChild(createEl(child))\r\n      })\r\n    }\r\n  } else {\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}\r\n\r\nexport function patchProps(el, oldProps = {}, props = {}) {\r\n  // 老的属性中有 新的没有 要删除老的  样式和其它属性\r\n  let oldStyles = oldProps.style || {}\r\n  let newStyles = props.style || {}\r\n\r\n  for (let key in oldStyles) {\r\n    if (!newStyles[key]) {\r\n      el.style[key] = ''\r\n    }\r\n  }\r\n  for (let key in oldProps) {\r\n    if (!props[key]) {\r\n      el.removeAttribute(key)\r\n    }\r\n  }\r\n  // 新的覆盖老的\r\n  // console.log('props', props)\r\n  for (let key in props) {\r\n    if (key === 'style') {\r\n      for (let styleName in props.style) {\r\n        el.style[styleName] = props.style[styleName]\r\n      }\r\n    } else {\r\n      el.setAttribute(key, props[key])\r\n    }\r\n  }\r\n}\r\n","import { patch } from './vnode/patch'\r\n\r\nexport function mounetComponent(vm, el) {\r\n  callHook(vm, 'beforeMount')\r\n  //vm._render 1）将render函数 变成vnode\r\n  //vm._update 2）将vnode变成真实DOM 放到页面中\r\n  vm._update(vm._render())\r\n  callHook(vm, 'mounted')\r\n}\r\n\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    // vnode变成真实DOM\r\n    let vm = this\r\n    // console.log(vm)\r\n    // 旧dom  虚拟dom\r\n    vm.$el = patch(vm.$el, vnode)\r\n  }\r\n}\r\n\r\n// 生命周期的调用\r\nexport function callHook(vm, hook) {\r\n  // console.log(vm)\r\n  const handlers = vm.$options[hook]\r\n  // console.log(hook)\r\n  // console.log(handlers)\r\n  if (handlers) {\r\n    for (let i = 0; i < handlers.length; i++) {\r\n      handlers[i].call(vm)\r\n    }\r\n  }\r\n}\r\n","import { compileToFunction } from './compile/index'\r\nimport { initState } from './initState'\r\nimport { callHook, mounetComponent } from './lifecycle'\r\nimport { mergeOptions } from './utils/index'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    // console.log('options', options)\r\n    let vm = this\r\n    // vm.$options = options\r\n    // console.log(Vue.options)\r\n    vm.$options = mergeOptions(Vue.options, options)\r\n    // console.log(vm.$options)\r\n    // callHook\r\n    callHook(vm, 'beforeCreate')\r\n    // 初始化状态\r\n    initState(vm)\r\n    callHook(vm, 'created')\r\n    // console.log(vm)\r\n    // 模板渲染\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    let vm = this\r\n    el = document.querySelector(el)\r\n    vm.$el = el\r\n    let options = vm.$options\r\n    if (!options.render) {\r\n      // 没有render\r\n      let template = options.template\r\n      if (!template) {\r\n        //没有template\r\n        if (el) {\r\n          // 获取HTML\r\n          el = el.outerHTML\r\n          // 先变成ast语法树 再转为redner函数\r\n          let render = compileToFunction(el)\r\n          // console.log(render)\r\n          options.render = render\r\n        }\r\n      }\r\n      // 挂载组件\r\n      mounetComponent(vm, el)\r\n    }\r\n  }\r\n}\r\n","export function renderMixin(Vue) {\r\n  Vue.prototype._c = function () {\r\n    // 标签\r\n    // 创建标签\r\n    // console.log(arguments)\r\n    return createElement(...arguments)\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    // 文本\r\n    // 创建文本\r\n    return createText(text)\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    // 插值表达式\r\n    if (val) {\r\n      if (typeof val === 'object') {\r\n        return JSON.stringify(val)\r\n      }\r\n      return val\r\n    }\r\n    return ''\r\n  }\r\n  Vue.prototype._render = function () {\r\n    // 将render函数 变成vnode\r\n    let vm = this\r\n    let render = vm.$options.render\r\n    let vnode = render.call(vm)\r\n    // console.log('vnode', vnode)\r\n    return vnode\r\n  }\r\n}\r\n\r\n// 创建元素\r\nfunction createElement(tag, data = {}, ...children) {\r\n  return vnode(tag, data, data.key, children)\r\n}\r\n\r\n// 创建文本\r\nfunction createText(text) {\r\n  return vnode(undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\n// 创建虚拟node\r\nfunction vnode(tag, data, key, children, text) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text\r\n  }\r\n}\r\n","import { initGlobApi } from './global-api/index'\r\nimport { initMixin } from './init'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport { renderMixin } from './vnode/index'\r\n\r\nfunction Vue(options) {\r\n  // 初始化\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\nlifecycleMixin(Vue)\r\nrenderMixin(Vue)\r\ninitGlobApi(Vue)\r\n\r\nexport default Vue\r\n"],"names":["HOOKS","starts","data","parentVal","childVal","computed","watch","forEach","hooks","mergeHook","concat","mergeOptions","parent","child","options","key","mergeField","hasOwnProperty","initGlobApi","Vue","mixin","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","createASTElement","tag","attrs","children","type","root","currentParent","stack","start","element","push","charts","text","replace","end","pop","length","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","tagName","endTagMatch","match","advance","substring","attr","name","value","n","genPorps","str","i","obj","split","item","JSON","stringify","slice","genChildren","ast","map","gen","join","node","generate","test","tokens","lastIndex","exec","index","trim","code","undefined","compileToFunction","el","render","Function","oldArrayProtoMethods","Array","prototype","ArrayMethods","Object","create","methods","method","args","result","apply","inserted","ob","__ob__","observeArray","observer","Observer","defineProperty","enumerable","isArray","console","log","__proto__","walk","keys","defineReactive","arr","get","set","newVal","initState","vm","ops","$options","initData","props","call","error","_data","proxy","source","patch","oldVnode","vnode","createEl","parentEL","parentNode","insertBefore","nextsibling","removeChild","document","createElement","patchProps","appendChild","createTextNode","oldProps","oldStyles","style","newStyles","removeAttribute","styleName","setAttribute","mounetComponent","callHook","_update","_render","lifecycleMixin","$el","hook","handlers","initMixin","_init","$mount","querySelector","template","outerHTML","renderMixin","_c","arguments","_v","createText","_s","val"],"mappings":";;;;;;EAAO,IAAMA,KAAK,GAAG,CACnB,cADmB,EAEnB,SAFmB,EAGnB,aAHmB,EAInB,SAJmB,EAKnB,cALmB,EAMnB,SANmB,EAOnB,eAPmB,EAQnB,WARmB,CAAd;;EAWP,IAAIC,MAAM,GAAG,EAAb,CAAA;;EAEAA,MAAM,CAACC,IAAP,GAAc,UAAUC,SAAV,EAAqBC,QAArB,EAA+B;EAC3C;EACA,EAAA,OAAOA,QAAP,CAAA;EACD,CAHD,CAAA;;EAIAH,MAAM,CAACI,QAAP,GAAkB,YAAY;EAE7B,CAFD,CAAA;;EAGAJ,MAAM,CAACK,KAAP,GAAe,YAAY;EAE1B,CAFD,CAAA;;EAIAN,KAAK,CAACO,OAAN,CAAc,UAACC,KAAD,EAAW;EACvBP,EAAAA,MAAM,CAACO,KAAD,CAAN,GAAgBC,SAAhB,CAAA;EACD,CAFD,CAAA,CAAA;;EAIA,SAASA,SAAT,CAAmBN,SAAnB,EAA8BC,QAA9B,EAAwC;EACtC;EACA,EAAA,IAAIA,QAAJ,EAAc;EACZ,IAAA,IAAID,SAAJ,EAAe;EACb,MAAA,OAAOA,SAAS,CAACO,MAAV,CAAiBN,QAAjB,CAAP,CAAA;EACD,KAFD,MAEO;QACL,OAAO,CAACA,QAAD,CAAP,CAAA;EACD,KAAA;EACF,GAND,MAMO;EACL,IAAA,OAAOD,SAAP,CAAA;EACD,GAAA;EACF,CAAA;;EAEM,SAASQ,YAAT,CAAsBC,MAAtB,EAA8BC,KAA9B,EAAqC;EAC1C;EACA;EACA,EAAA,IAAMC,OAAO,GAAG,EAAhB,CAH0C;;EAK1C,EAAA,KAAK,IAAIC,GAAT,IAAgBH,MAAhB,EAAwB;MACtBI,UAAU,CAACD,GAAD,CAAV,CAAA;EACD,GAPyC;;;EAS1C,EAAA,KAAK,IAAIA,IAAT,IAAgBF,KAAhB,EAAuB;EACrB,IAAA,IAAI,CAACD,MAAM,CAACK,cAAP,CAAsBF,IAAtB,CAAL,EAAiC;QAC/BC,UAAU,CAACD,IAAD,CAAV,CAAA;EACD,KAAA;EACF,GAAA;;IACD,SAASC,UAAT,CAAoBD,GAApB,EAAyB;EACvB;EACA,IAAA,IAAId,MAAM,CAACc,GAAD,CAAV,EAAiB;EACfD,MAAAA,OAAO,CAACC,GAAD,CAAP,GAAed,MAAM,CAACc,GAAD,CAAN,CAAYH,MAAM,CAACG,GAAD,CAAlB,EAAyBF,KAAK,CAACE,GAAD,CAA9B,CAAf,CAAA;EACD,KAFD,MAEO;EACLD,MAAAA,OAAO,CAACC,GAAD,CAAP,GAAeF,KAAK,CAACE,GAAD,CAAL,IAAcH,MAAM,CAACG,GAAD,CAAnC,CAAA;EACD,KAAA;EACF,GArByC;;;EAuB1C,EAAA,OAAOD,OAAP,CAAA;EACD;;EC/DM,SAASI,WAAT,CAAqBC,GAArB,EAA0B;EAC/B;EACA;IACAA,GAAG,CAACL,OAAJ,GAAc,EAAd,CAAA;;EACAK,EAAAA,GAAG,CAACC,KAAJ,GAAY,UAAUA,KAAV,EAAiB;EAC3B;EACA;EACA;EACA;MACA,IAAKN,CAAAA,OAAL,GAAeH,YAAY,CAAC,IAAA,CAAKG,OAAN,EAAeM,KAAf,CAA3B,CAL2B;;EAO3B,IAAA,OAAO,IAAP,CAAA;KAPF,CAAA;EASD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECfD;EACA,IAAMC,MAAM,GAAZ,8BAAA;;EAEA,IAAMC,YAAY,GAAUD,MAAAA,CAAAA,MAAAA,CAAAA,MAAV,kBAAwBA,MAAxB,EAAA,GAAA,CAAlB;;EAEA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,CAAA,CAArB;;EAEA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,EAAA,QAAA,CAAA,CAAf;;EAEA,IAAMI,SAAS,GACb,2EADF;;EAGA,IAAMC,aAAa,GAAG,YAAtB;;EAEO,IAAMC,YAAY,GAAG,0BAArB;;EAGP,SAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,KAA/B,EAAsC;IACpC,OAAO;EACLD,IAAAA,GAAG,EAAHA,GADK;EACA;EACLC,IAAAA,KAAK,EAALA,KAFK;EAEE;EACPC,IAAAA,QAAQ,EAAE,EAHL;EAGS;EACdC,IAAAA,IAAI,EAAE,CAJD;EAII;EACTrB,IAAAA,MAAM,EAAE,IAAA;KALV,CAAA;EAOD,CAAA;;EAED,IAAIsB,IAAJ;;EACA,IAAIC,aAAJ;;EACA,IAAIC,KAAK,GAAG,EAAZ,CAAA;;EAEA,SAASC,KAAT,CAAeP,GAAf,EAAoBC,KAApB,EAA2B;EACzB;EACA;EACA,EAAA,IAAIO,OAAO,GAAGT,gBAAgB,CAACC,GAAD,EAAMC,KAAN,CAA9B,CAAA;;IACA,IAAI,CAACG,IAAL,EAAW;EACTA,IAAAA,IAAI,GAAGI,OAAP,CAAA;EACD,GAAA;;EACDH,EAAAA,aAAa,GAAGG,OAAhB,CAAA;IACAF,KAAK,CAACG,IAAN,CAAWD,OAAX,CAAA,CAAA;EACD,CAAA;;EACD,SAASE,MAAT,CAAgBC,IAAhB,EAAsB;EACpB;EACA;IACAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP,CAAA;;EACA,EAAA,IAAID,IAAJ,EAAU;EACRN,IAAAA,aAAa,CAACH,QAAd,CAAuBO,IAAvB,CAA4B;EAC1BN,MAAAA,IAAI,EAAE,CADoB;EACjB;EACTQ,MAAAA,IAAI,EAAJA,IAAAA;OAFF,CAAA,CAAA;EAID,GAAA;EACF,CAAA;;EACD,SAASE,GAAT,CAAab,GAAb,EAAkB;EAChB;EACA;EACA,EAAA,IAAIQ,OAAO,GAAGF,KAAK,CAACQ,GAAN,EAAd,CAAA;IACAT,aAAa,GAAGC,KAAK,CAACA,KAAK,CAACS,MAAN,GAAe,CAAhB,CAArB,CAAA;;EAEA,EAAA,IAAIV,aAAJ,EAAmB;EACjBG,IAAAA,OAAO,CAAC1B,MAAR,GAAiBuB,aAAa,CAACL,GAA/B,CAAA;EACAK,IAAAA,aAAa,CAACH,QAAd,CAAuBO,IAAvB,CAA4BD,OAA5B,CAAA,CAAA;EACD,GAAA;EACF,CAAA;;EAEM,SAASQ,SAAT,CAAmBC,IAAnB,EAAyB;EAC9B,EAAA,OAAOA,IAAP,EAAa;EACX;EACA,IAAA,IAAIC,OAAO,GAAGD,IAAI,CAACE,OAAL,CAAa,GAAb,CAAd,CAAA;;MACA,IAAID,OAAO,KAAK,CAAhB,EAAmB;EACjB;QACA,IAAME,aAAa,GAAGC,aAAa,EAAnC,CAAA;;EACA,MAAA,IAAID,aAAJ,EAAmB;UACjBb,KAAK,CAACa,aAAa,CAACE,OAAf,EAAwBF,aAAa,CAACnB,KAAtC,CAAL,CAAA;EACA,QAAA,SAAA;EACD,OANgB;;;QAQjB,IAAIsB,WAAW,GAAGN,IAAI,CAACO,KAAL,CAAW7B,MAAX,CAAlB,CARiB;;EAUjB,MAAA,IAAI4B,WAAJ,EAAiB;EACfE,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAD,CAAX,CAAeR,MAAhB,CAAP,CAAA;EACAF,QAAAA,GAAG,CAACU,WAAW,CAAC,CAAD,CAAZ,CAAH,CAAA;EACA,QAAA,SAAA;EACD,OAAA;EACF,KAlBU;;;EAoBX,IAAA,IAAIZ,IAAI,GAAR,KAAA,CAAA,CAAA;;MACA,IAAIO,OAAO,GAAG,CAAd,EAAiB;EACf;EACA;QACAP,IAAI,GAAGM,IAAI,CAACS,SAAL,CAAe,CAAf,EAAkBR,OAAlB,CAAP,CAAA;EACAR,MAAAA,MAAM,CAACC,IAAD,CAAN,CAJe;EAMhB,KAAA;;EACD,IAAA,IAAIA,IAAJ,EAAU;EACRc,MAAAA,OAAO,CAACd,IAAI,CAACI,MAAN,CAAP,CAAA;EACD,KAAA;EACF,GAAA;;EACD,EAAA,SAASM,aAAT,GAAyB;EACvB,IAAA,IAAMd,KAAK,GAAGU,IAAI,CAACO,KAAL,CAAW/B,YAAX,CAAd,CAAA;;EACA,IAAA,IAAIc,KAAJ,EAAW;EACT;EACA;EACA,MAAA,IAAIiB,KAAK,GAAG;EACVF,QAAAA,OAAO,EAAEf,KAAK,CAAC,CAAD,CADJ;EAEVN,QAAAA,KAAK,EAAE,EAAA;EAFG,OAAZ,CAHS;;EAQTwB,MAAAA,OAAO,CAAClB,KAAK,CAAC,CAAD,CAAL,CAASQ,MAAV,CAAP,CAAA;;EACA,MAAA,IAAIY,IAAJ,EAAUd,IAAV,CATS;;;EAWT,MAAA,OACE,EAAEA,IAAG,GAAGI,IAAI,CAACO,KAAL,CAAW3B,aAAX,CAAR,MACC8B,IAAI,GAAGV,IAAI,CAACO,KAAL,CAAW5B,SAAX,CADR,CADF,EAGE;EACA4B,QAAAA,KAAK,CAACvB,KAAN,CAAYQ,IAAZ,CAAiB;EACfmB,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADK;EAEfE,UAAAA,KAAK,EAAEF,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAAA;EAFlB,SAAjB,EADA;;UAMAF,OAAO,CAACE,IAAI,CAAC,CAAD,CAAJ,CAAQZ,MAAT,CAAP,CANA;EAQD,OAAA;;EACD,MAAA,IAAIF,IAAJ,EAAS;EACP;EACAY,QAAAA,OAAO,CAACZ,IAAG,CAAC,CAAD,CAAH,CAAOE,MAAR,CAAP,CAAA;EACA,QAAA,OAAOS,KAAP,CAAA;EACD,OAAA;EACF,KAAA;EACF,GAAA;;IACD,SAASC,OAAT,CAAiBK,CAAjB,EAAoB;MAClBb,IAAI,GAAGA,IAAI,CAACS,SAAL,CAAeI,CAAf,CAAP,CADkB;EAGnB,GApE6B;;;EAsE9B,EAAA,OAAO1B,IAAP,CAAA;EACD;;EC5HD,SAAS2B,QAAT,CAAkB9B,KAAlB,EAAyB;EACvB;IACA,IAAI+B,GAAG,GAAG,EAAV,CAAA;;EACA,EAAA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhC,KAAK,CAACc,MAA1B,EAAkCkB,CAAC,EAAnC,EAAuC;EACrC,IAAA,IAAIN,IAAI,GAAG1B,KAAK,CAACgC,CAAD,CAAhB,CAAA;;EACA,IAAA,IAAIN,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;EAAA,MAAA,CAAA,YAAA;UACzB,IAAIM,GAAG,GAAG,EAAV,CAAA;UACAP,IAAI,CAACE,KAAL,CAAWM,KAAX,CAAiB,GAAjB,CAAA,CAAsB1D,OAAtB,CAA8B,UAAC2D,IAAD,EAAU;EACtC,UAAA,IAAIA,IAAJ,EAAU;EACR,YAAA,IAAA,WAAA,GAAmBA,IAAI,CAACD,KAAL,CAAW,GAAX,CAAnB;EAAA,gBAAA,YAAA,GAAA,cAAA,CAAA,WAAA,EAAA,CAAA,CAAA;EAAA,gBAAKlD,GAAL,GAAA,YAAA,CAAA,CAAA,CAAA;EAAA,gBAAU4C,KAAV,GAAA,YAAA,CAAA,CAAA,CAAA,CAAA;;EACAK,YAAAA,GAAG,CAACjD,GAAD,CAAH,GAAW4C,KAAX,CAAA;EACD,WAAA;EACF,SALD,EAFyB;EASzB;EACA;;UACAF,IAAI,CAACE,KAAL,GAAaK,GAAb,CAAA;EAXyB,OAAA,GAAA,CAAA;EAY1B,KAAA;;EACDF,IAAAA,GAAG,IAAOL,EAAAA,CAAAA,MAAAA,CAAAA,IAAI,CAACC,IAAZ,EAAoBS,GAAAA,CAAAA,CAAAA,MAAAA,CAAAA,IAAI,CAACC,SAAL,CAAeX,IAAI,CAACE,KAApB,CAApB,EAAH,GAAA,CAAA,CAAA;EACD,GAAA;;IACD,OAAWG,GAAAA,CAAAA,MAAAA,CAAAA,GAAG,CAACO,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX,EAAA,GAAA,CAAA,CAAA;EACD;;;EAED,SAASC,WAAT,CAAqBC,GAArB,EAA0B;EACxB,EAAA,IAAIvC,QAAQ,GAAGuC,GAAG,CAACvC,QAAnB,CAAA;;EACA,EAAA,IAAIA,QAAJ,EAAc;EACZ,IAAA,OAAOA,QAAQ,CAACwC,GAAT,CAAa,UAAC3D,KAAD,EAAA;QAAA,OAAW4D,GAAG,CAAC5D,KAAD,CAAd,CAAA;EAAA,KAAb,CAAoC6D,CAAAA,IAApC,CAAyC,GAAzC,CAAP,CAAA;EACD,GAAA;;EACD,EAAA,OAAO,IAAP,CAAA;EACD,CAAA;;EACD,SAASD,GAAT,CAAaE,IAAb,EAAmB;EACjB;EACA,EAAA,IAAIA,IAAI,CAAC1C,IAAL,KAAc,CAAlB,EAAqB;EACnB;MACA,OAAO2C,QAAQ,CAACD,IAAD,CAAf,CAAA;EACD,GAHD,MAGO,IAAIA,IAAI,CAAC1C,IAAL,KAAc,CAAlB,EAAqB;EAC1B;EACA,IAAA,IAAIQ,IAAI,GAAGkC,IAAI,CAAClC,IAAhB,CAAA;;EACA,IAAA,IAAI,CAACb,YAAY,CAACiD,IAAb,CAAkBpC,IAAlB,CAAL,EAA8B;EAC5B;EACA,MAAA,OAAA,KAAA,CAAA,MAAA,CAAa0B,IAAI,CAACC,SAAL,CAAe3B,IAAf,CAAb,EAAA,GAAA,CAAA,CAAA;EACD,KAHD,MAGO;EACL;QACA,IAAIqC,MAAM,GAAG,EAAb,CAAA;EACA,MAAA,IAAIC,SAAS,GAAInD,YAAY,CAACmD,SAAb,GAAyB,CAA1C,CAAA;EACA,MAAA,IAAIzB,KAAJ,CAAA;;QACA,OAAQA,KAAK,GAAG1B,YAAY,CAACoD,IAAb,CAAkBvC,IAAlB,CAAhB,EAA0C;EACxC;EACA,QAAA,IAAIwC,KAAK,GAAG3B,KAAK,CAAC2B,KAAlB,CAAA;;UACA,IAAIA,KAAK,GAAGF,SAAZ,EAAuB;EACrB;EACAD,UAAAA,MAAM,CAACvC,IAAP,CAAY4B,IAAI,CAACC,SAAL,CAAe3B,IAAI,CAAC4B,KAAL,CAAWU,SAAX,EAAsBE,KAAtB,CAAf,CAAZ,CAAA,CAAA;EACD,SAAA;;UACDH,MAAM,CAACvC,IAAP,CAAkBe,KAAAA,CAAAA,MAAAA,CAAAA,KAAK,CAAC,CAAD,CAAL,CAAS4B,IAAT,EAAlB,EAAA,GAAA,CAAA,CAAA,CAAA;UACAH,SAAS,GAAGE,KAAK,GAAG3B,KAAK,CAAC,CAAD,CAAL,CAAST,MAA7B,CAAA;EACD,OAAA;;EACD,MAAA,IAAIkC,SAAS,GAAGtC,IAAI,CAACI,MAArB,EAA6B;EAC3BiC,QAAAA,MAAM,CAACvC,IAAP,CAAY4B,IAAI,CAACC,SAAL,CAAe3B,IAAI,CAAC4B,KAAL,CAAWU,SAAX,CAAf,CAAZ,CAAA,CAAA;EACD,OAjBI;;;EAmBL,MAAA,OAAA,KAAA,CAAA,MAAA,CAAaD,MAAM,CAACJ,IAAP,CAAY,GAAZ,CAAb,EAAA,GAAA,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;;EAEM,SAASE,QAAT,CAAkBL,GAAlB,EAAuB;EAC5B,EAAA,IAAIvC,QAAQ,GAAGsC,WAAW,CAACC,GAAD,CAA1B,CAAA;IAEA,IAAIY,IAAI,GAAUZ,MAAAA,CAAAA,MAAAA,CAAAA,GAAG,CAACzC,GAAd,eACNyC,GAAG,CAACxC,KAAJ,CAAUc,MAAV,GAAA,EAAA,CAAA,MAAA,CAAsBgB,QAAQ,CAACU,GAAG,CAACxC,KAAL,CAA9B,CAAA,GAA8CqD,SADxC,EAEJpD,GAAAA,CAAAA,CAAAA,MAAAA,CAAAA,QAFI,EAAR,GAAA,CAAA,CAH4B;;EAO5B,EAAA,OAAOmD,IAAP,CAAA;EACD;;ECjFM,SAASE,iBAAT,CAA2BC,EAA3B,EAA+B;EACpC;EACA;EACA,EAAA,IAAIf,GAAG,GAAGzB,SAAS,CAACwC,EAAD,CAAnB,CAHoC;EAKpC;EACA;EACA;;EACA,EAAA,IAAIH,IAAI,GAAGP,QAAQ,CAACL,GAAD,CAAnB,CARoC;EAUpC;;IACA,IAAIgB,MAAM,GAAG,IAAIC,QAAJ,6BAAkCL,IAAlC,EAAA,GAAA,CAAA,CAAb,CAXoC;;EAapC,EAAA,OAAOI,MAAP,CAAA;EACD;;ECjBD;EAEA;EACA,IAAIE,oBAAoB,GAAGC,KAAK,CAACC,SAAjC;;EAEO,IAAIC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcL,oBAAd,CAAnB;;EAEP,IAAIM,OAAO,GAAG,CAAC,MAAD,EAAS,KAAT,EAAgB,SAAhB,EAA2B,OAA3B,EAAoC,QAApC,EAA8C,MAA9C,EAAsD,SAAtD,CAAd,CAAA;EAEAA,OAAO,CAACxF,OAAR,CAAgB,UAACyF,MAAD,EAAY;EAC1BJ,EAAAA,YAAY,CAACI,MAAD,CAAZ,GAAuB,YAAmB;EAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANC,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;QAANA,IAAM,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,KAAA;;EACxC;EACA,IAAA,IAAMC,MAAM,GAAGT,oBAAoB,CAACO,MAAD,CAApB,CAA6BG,KAA7B,CAAmC,IAAnC,EAAyCF,IAAzC,CAAf,CAFwC;;MAIxC,IAAIG,QAAJ,CAJwC;;EAKxC,IAAA,QAAQJ,MAAR;EACE,MAAA,KAAK,MAAL,CAAA;EACA,MAAA,KAAK,SAAL;EACEI,QAAAA,QAAQ,GAAGH,IAAX,CAAA;EACA,QAAA,MAAA;;EACF,MAAA,KAAK,QAAL;EACEG,QAAAA,QAAQ,GAAGH,IAAI,CAAC5B,KAAL,CAAW,CAAX,CAAX,CAAA;EACA,QAAA,MAAA;EAPJ,KAAA;;MAWA,IAAIgC,EAAE,GAAG,IAAA,CAAKC,MAAd,CAAA;;EACA,IAAA,IAAIF,QAAJ,EAAc;EACZ;QACAC,EAAE,CAACE,YAAH,CAAgBH,QAAhB,CAAA,CAAA;EACD,KAAA;;EACD,IAAA,OAAOF,MAAP,CAAA;KArBF,CAAA;EAuBD,CAxBD,CAAA;;ECRO,SAASM,QAAT,CAAkBtG,IAAlB,EAAwB;IAC7B,IAAI,OAAA,CAAOA,IAAP,CAAgB,KAAA,QAAhB,IAA4BA,IAAI,KAAK,IAAzC,EAA+C;EAC7C;EACA,IAAA,OAAOA,IAAP,CAAA;EACD,GAJ4B;;;EAO7B,EAAA,OAAO,IAAIuG,QAAJ,CAAavG,IAAb,CAAP,CAAA;EACD,CAAA;;MAEKuG;EACJ,EAAA,SAAA,QAAA,CAAY9C,KAAZ,EAAmB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;;EACjB;EACAkC,IAAAA,MAAM,CAACa,cAAP,CAAsB/C,KAAtB,EAA6B,QAA7B,EAAuC;EACrCgD,MAAAA,UAAU,EAAE,KADyB;EAClB;EACnBhD,MAAAA,KAAK,EAAE,IAAA;EAF8B,KAAvC,EAFiB;EAQjB;;EACA,IAAA,IAAI+B,KAAK,CAACkB,OAAN,CAAcjD,KAAd,CAAJ,EAA0B;EACxBkD,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBnD,KAAlB,EADwB;;EAGxBA,MAAAA,KAAK,CAACoD,SAAN,GAAkBnB,YAAlB,CAHwB;;EAKxB,MAAA,IAAA,CAAKW,YAAL,CAAkB5C,KAAlB,CAAA,CALwB;EAMzB,KAND,MAMO;QACL,IAAKqD,CAAAA,IAAL,CAAUrD,KAAV,CAAA,CAAA;EACD,KAAA;EACF,GAAA;;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKzD,IAAL,EAAW;QACT,IAAI+G,IAAI,GAAGpB,MAAM,CAACoB,IAAP,CAAY/G,IAAZ,CAAX,CADS;;EAGT,MAAA,KAAK,IAAI6D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkD,IAAI,CAACpE,MAAzB,EAAiCkB,CAAC,EAAlC,EAAsC;EACpC,QAAA,IAAMhD,GAAG,GAAGkG,IAAI,CAAClD,CAAD,CAAhB,CAAA;EACA,QAAA,IAAMJ,KAAK,GAAGzD,IAAI,CAACa,GAAD,CAAlB,CAFoC;;EAIpCmG,QAAAA,cAAc,CAAChH,IAAD,EAAOa,GAAP,EAAY4C,KAAZ,CAAd,CAAA;EACD,OAAA;EACF,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,YAAA,CAAawD,GAAb,EAAkB;EAChB,MAAA,KAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoD,GAAG,CAACtE,MAAxB,EAAgCkB,CAAC,EAAjC,EAAqC;EACnCyC,QAAAA,QAAQ,CAACW,GAAG,CAACpD,CAAD,CAAJ,CAAR,CAAA;EACD,OAAA;EACF,KAAA;;;;EAEH,CAAA,EAAA,CAAA;;;EACA,SAASmD,cAAT,CAAwBhH,IAAxB,EAA8Ba,GAA9B,EAAmC4C,KAAnC,EAA0C;EACxC6C,EAAAA,QAAQ,CAAC7C,KAAD,CAAR,CADwC;;EAExCkC,EAAAA,MAAM,CAACa,cAAP,CAAsBxG,IAAtB,EAA4Ba,GAA5B,EAAiC;EAC/BqG,IAAAA,GAD+B,EACzB,SAAA,GAAA,GAAA;EACJ;EACA,MAAA,OAAOzD,KAAP,CAAA;OAH6B;MAK/B0D,GAL+B,EAAA,SAAA,GAAA,CAK3BC,MAL2B,EAKnB;EACV;QACA,IAAIA,MAAM,KAAK3D,KAAf,EAAsB,OAAA;EACtB6C,MAAAA,QAAQ,CAACc,MAAD,CAAR,CAHU;;EAIV3D,MAAAA,KAAK,GAAG2D,MAAR,CAAA;EACD,KAAA;KAVH,CAAA,CAAA;EAYD;;EC7DM,SAASC,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,EAAA,IAAIC,GAAG,GAAGD,EAAE,CAACE,QAAb,CAD4B;;IAG5B,IAAID,GAAG,CAACvH,IAAR,EAAc;MACZyH,QAAQ,CAACH,EAAD,CAAR,CAAA;EACD,GAAA;;IACD,IAAIC,GAAG,CAACG,KAAR,EAAe,CAEd;;IACD,IAAIH,GAAG,CAACnH,KAAR,EAAe,CAEd;;IACD,IAAImH,GAAG,CAACpH,QAAR,EAAkB,CAEjB;;IACD,IAAIoH,GAAG,CAAC1B,OAAR,EAAiB,CAEhB;EACF,CAAA;;EAED,SAAS4B,QAAT,CAAkBH,EAAlB,EAAsB;EACpB;IACA,IAAItH,IAAI,GAAGsH,EAAE,CAACE,QAAH,CAAYxH,IAAvB,CAFoB;;IAIpB,IAAI,OAAA,CAAOA,IAAP,CAAgB,KAAA,QAAhB,IAA4BA,IAAI,KAAK,IAAzC,EAA+C;EAC7CA,IAAAA,IAAI,GAAGA,IAAP,CAAA;EACD,GAFD,MAEO,IAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;EACrCA,IAAAA,IAAI,GAAGA,IAAI,CAAC2H,IAAL,CAAUL,EAAV,CAAP,CAAA;EACD,GAFM,MAEA;MACLX,OAAO,CAACiB,KAAR,CAAc,iBAAd,CAAA,CAAA;EACA,IAAA,OAAO,KAAP,CAAA;EACD,GAAA;;EACDN,EAAAA,EAAE,CAACO,KAAH,GAAW7H,IAAX,CAZoB;;EAepB,EAAA,KAAK,IAAIa,GAAT,IAAgBb,IAAhB,EAAsB;EACpB8H,IAAAA,KAAK,CAACR,EAAD,EAAK,OAAL,EAAczG,GAAd,CAAL,CAAA;EACD,GAjBmB;;;IAmBpByF,QAAQ,CAACtG,IAAD,CAAR,CAAA;EACD,CAAA;;EAED,SAAS8H,KAAT,CAAeR,EAAf,EAAmBS,MAAnB,EAA2BlH,GAA3B,EAAgC;EAC9B8E,EAAAA,MAAM,CAACa,cAAP,CAAsBc,EAAtB,EAA0BzG,GAA1B,EAA+B;EAC7BqG,IAAAA,GAD6B,EACvB,SAAA,GAAA,GAAA;EACJ,MAAA,OAAOI,EAAE,CAACS,MAAD,CAAF,CAAWlH,GAAX,CAAP,CAAA;OAF2B;MAI7BsG,GAJ6B,EAAA,SAAA,GAAA,CAIzBC,MAJyB,EAIjB;EACVE,MAAAA,EAAE,CAACS,MAAD,CAAF,CAAWlH,GAAX,IAAkBuG,MAAlB,CAAA;EACD,KAAA;KANH,CAAA,CAAA;EAQD;;ECpDM,SAASY,KAAT,CAAeC,QAAf,EAAyBC,KAAzB,EAAgC;EACrC;EACA;EACA,EAAA,IAAI9C,EAAE,GAAG+C,QAAQ,CAACD,KAAD,CAAjB,CAHqC;EAKrC;;EACA,EAAA,IAAIE,QAAQ,GAAGH,QAAQ,CAACI,UAAxB,CAAA;EACAD,EAAAA,QAAQ,CAACE,YAAT,CAAsBlD,EAAtB,EAA0B6C,QAAQ,CAACM,WAAnC,CAAA,CAAA;IACAH,QAAQ,CAACI,WAAT,CAAqBP,QAArB,CAAA,CAAA;EACA,EAAA,OAAO7C,EAAP,CAAA;EACD;;EAED,SAAS+C,QAAT,CAAkBD,KAAlB,EAAyB;EACvB,EAAA,IAAMtG,GAAN,GAAyCsG,KAAzC,CAAMtG,GAAN,CAAA;EAAA,MAAWE,QAAX,GAAyCoG,KAAzC,CAAWpG,QAAX,CAAA;EAAA,MAAyCoG,KAAzC,CAAqBrH,GAArB,CAAA;EAAA,UAA0Bb,IAA1B,GAAyCkI,KAAzC,CAA0BlI,IAA1B,CAAA;EAAA,MAAgCuC,IAAhC,GAAyC2F,KAAzC,CAAgC3F,KAAhC;;EACA,EAAA,IAAI,OAAOX,GAAP,KAAe,QAAnB,EAA6B;EAC3B;MACAsG,KAAK,CAAC9C,EAAN,GAAWqD,QAAQ,CAACC,aAAT,CAAuB9G,GAAvB,CAAX,CAAA;MACA+G,UAAU,CAACT,KAAK,CAAC9C,EAAP,EAAW,EAAX,EAAepF,IAAf,CAAV,CAAA;;EACA,IAAA,IAAI8B,QAAQ,CAACa,MAAT,GAAkB,CAAtB,EAAyB;EACvBb,MAAAA,QAAQ,CAACzB,OAAT,CAAiB,UAACM,KAAD,EAAW;UAC1BuH,KAAK,CAAC9C,EAAN,CAASwD,WAAT,CAAqBT,QAAQ,CAACxH,KAAD,CAA7B,CAAA,CAAA;SADF,CAAA,CAAA;EAGD,KAAA;EACF,GATD,MASO;MACLuH,KAAK,CAAC9C,EAAN,GAAWqD,QAAQ,CAACI,cAAT,CAAwBtG,IAAxB,CAAX,CAAA;EACD,GAAA;;IACD,OAAO2F,KAAK,CAAC9C,EAAb,CAAA;EACD,CAAA;;EAEM,SAASuD,UAAT,CAAoBvD,EAApB,EAAmD;IAAA,IAA3B0D,QAA2B,uEAAhB,EAAgB,CAAA;IAAA,IAAZpB,KAAY,uEAAJ,EAAI,CAAA;EACxD;EACA,EAAA,IAAIqB,SAAS,GAAGD,QAAQ,CAACE,KAAT,IAAkB,EAAlC,CAAA;EACA,EAAA,IAAIC,SAAS,GAAGvB,KAAK,CAACsB,KAAN,IAAe,EAA/B,CAAA;;EAEA,EAAA,KAAK,IAAInI,GAAT,IAAgBkI,SAAhB,EAA2B;EACzB,IAAA,IAAI,CAACE,SAAS,CAACpI,GAAD,CAAd,EAAqB;EACnBuE,MAAAA,EAAE,CAAC4D,KAAH,CAASnI,GAAT,IAAgB,EAAhB,CAAA;EACD,KAAA;EACF,GAAA;;EACD,EAAA,KAAK,IAAIA,IAAT,IAAgBiI,QAAhB,EAA0B;EACxB,IAAA,IAAI,CAACpB,KAAK,CAAC7G,IAAD,CAAV,EAAiB;QACfuE,EAAE,CAAC8D,eAAH,CAAmBrI,IAAnB,CAAA,CAAA;EACD,KAAA;EACF,GAduD;EAgBxD;;;EACA,EAAA,KAAK,IAAIA,KAAT,IAAgB6G,KAAhB,EAAuB;MACrB,IAAI7G,KAAG,KAAK,OAAZ,EAAqB;EACnB,MAAA,KAAK,IAAIsI,SAAT,IAAsBzB,KAAK,CAACsB,KAA5B,EAAmC;UACjC5D,EAAE,CAAC4D,KAAH,CAASG,SAAT,CAAA,GAAsBzB,KAAK,CAACsB,KAAN,CAAYG,SAAZ,CAAtB,CAAA;EACD,OAAA;EACF,KAJD,MAIO;QACL/D,EAAE,CAACgE,YAAH,CAAgBvI,KAAhB,EAAqB6G,KAAK,CAAC7G,KAAD,CAA1B,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF;;ECrDM,SAASwI,eAAT,CAAyB/B,EAAzB,EAA6BlC,EAA7B,EAAiC;EACtCkE,EAAAA,QAAQ,CAAChC,EAAD,EAAK,aAAL,CAAR,CADsC;EAGtC;;EACAA,EAAAA,EAAE,CAACiC,OAAH,CAAWjC,EAAE,CAACkC,OAAH,EAAX,CAAA,CAAA;;EACAF,EAAAA,QAAQ,CAAChC,EAAD,EAAK,SAAL,CAAR,CAAA;EACD,CAAA;EAEM,SAASmC,cAAT,CAAwBxI,GAAxB,EAA6B;EAClCA,EAAAA,GAAG,CAACwE,SAAJ,CAAc8D,OAAd,GAAwB,UAAUrB,KAAV,EAAiB;EACvC;EACA,IAAA,IAAIZ,EAAE,GAAG,IAAT,CAFuC;EAIvC;;MACAA,EAAE,CAACoC,GAAH,GAAS1B,KAAK,CAACV,EAAE,CAACoC,GAAJ,EAASxB,KAAT,CAAd,CAAA;KALF,CAAA;EAOD;;EAGM,SAASoB,QAAT,CAAkBhC,EAAlB,EAAsBqC,IAAtB,EAA4B;EACjC;IACA,IAAMC,QAAQ,GAAGtC,EAAE,CAACE,QAAH,CAAYmC,IAAZ,CAAjB,CAFiC;EAIjC;;EACA,EAAA,IAAIC,QAAJ,EAAc;EACZ,IAAA,KAAK,IAAI/F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+F,QAAQ,CAACjH,MAA7B,EAAqCkB,CAAC,EAAtC,EAA0C;EACxC+F,MAAAA,QAAQ,CAAC/F,CAAD,CAAR,CAAY8D,IAAZ,CAAiBL,EAAjB,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF;;EC1BM,SAASuC,SAAT,CAAmB5I,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACwE,SAAJ,CAAcqE,KAAd,GAAsB,UAAUlJ,OAAV,EAAmB;EACvC;EACA,IAAA,IAAI0G,EAAE,GAAG,IAAT,CAFuC;EAIvC;;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAc/G,YAAY,CAACQ,GAAG,CAACL,OAAL,EAAcA,OAAd,CAA1B,CALuC;EAOvC;;EACA0I,IAAAA,QAAQ,CAAChC,EAAD,EAAK,cAAL,CAAR,CARuC;;MAUvCD,SAAS,CAACC,EAAD,CAAT,CAAA;EACAgC,IAAAA,QAAQ,CAAChC,EAAD,EAAK,SAAL,CAAR,CAXuC;EAavC;;EACA,IAAA,IAAIA,EAAE,CAACE,QAAH,CAAYpC,EAAhB,EAAoB;EAClBkC,MAAAA,EAAE,CAACyC,MAAH,CAAUzC,EAAE,CAACE,QAAH,CAAYpC,EAAtB,CAAA,CAAA;EACD,KAAA;KAhBH,CAAA;;EAmBAnE,EAAAA,GAAG,CAACwE,SAAJ,CAAcsE,MAAd,GAAuB,UAAU3E,EAAV,EAAc;MACnC,IAAIkC,EAAE,GAAG,IAAT,CAAA;EACAlC,IAAAA,EAAE,GAAGqD,QAAQ,CAACuB,aAAT,CAAuB5E,EAAvB,CAAL,CAAA;MACAkC,EAAE,CAACoC,GAAH,GAAStE,EAAT,CAAA;EACA,IAAA,IAAIxE,OAAO,GAAG0G,EAAE,CAACE,QAAjB,CAAA;;EACA,IAAA,IAAI,CAAC5G,OAAO,CAACyE,MAAb,EAAqB;EACnB;EACA,MAAA,IAAI4E,QAAQ,GAAGrJ,OAAO,CAACqJ,QAAvB,CAAA;;QACA,IAAI,CAACA,QAAL,EAAe;EACb;EACA,QAAA,IAAI7E,EAAJ,EAAQ;EACN;EACAA,UAAAA,EAAE,GAAGA,EAAE,CAAC8E,SAAR,CAFM;;EAIN,UAAA,IAAI7E,MAAM,GAAGF,iBAAiB,CAACC,EAAD,CAA9B,CAJM;;YAMNxE,OAAO,CAACyE,MAAR,GAAiBA,MAAjB,CAAA;EACD,SAAA;EACF,OAbkB;;;EAenBgE,MAAAA,eAAe,CAAC/B,EAAD,CAAf,CAAA;EACD,KAAA;KArBH,CAAA;EAuBD;;EChDM,SAAS6C,WAAT,CAAqBlJ,GAArB,EAA0B;EAC/BA,EAAAA,GAAG,CAACwE,SAAJ,CAAc2E,EAAd,GAAmB,YAAY;EAC7B;EACA;EACA;EACA,IAAA,OAAO1B,aAAa,CAAA,KAAb,CAAiB2B,KAAAA,CAAAA,EAAAA,SAAjB,CAAP,CAAA;KAJF,CAAA;;EAMApJ,EAAAA,GAAG,CAACwE,SAAJ,CAAc6E,EAAd,GAAmB,UAAU/H,IAAV,EAAgB;EACjC;EACA;MACA,OAAOgI,UAAU,CAAChI,IAAD,CAAjB,CAAA;KAHF,CAAA;;EAKAtB,EAAAA,GAAG,CAACwE,SAAJ,CAAc+E,EAAd,GAAmB,UAAUC,GAAV,EAAe;EAChC;EACA,IAAA,IAAIA,GAAJ,EAAS;EACP,MAAA,IAAI,OAAOA,CAAAA,GAAP,CAAe,KAAA,QAAnB,EAA6B;EAC3B,QAAA,OAAOxG,IAAI,CAACC,SAAL,CAAeuG,GAAf,CAAP,CAAA;EACD,OAAA;;EACD,MAAA,OAAOA,GAAP,CAAA;EACD,KAAA;;EACD,IAAA,OAAO,EAAP,CAAA;KARF,CAAA;;EAUAxJ,EAAAA,GAAG,CAACwE,SAAJ,CAAc+D,OAAd,GAAwB,YAAY;EAClC;MACA,IAAIlC,EAAE,GAAG,IAAT,CAAA;EACA,IAAA,IAAIjC,MAAM,GAAGiC,EAAE,CAACE,QAAH,CAAYnC,MAAzB,CAAA;MACA,IAAI6C,KAAK,GAAG7C,MAAM,CAACsC,IAAP,CAAYL,EAAZ,CAAZ,CAJkC;;EAMlC,IAAA,OAAOY,KAAP,CAAA;KANF,CAAA;EAQD;;EAGD,SAASQ,aAAT,CAAuB9G,GAAvB,EAAoD;IAAA,IAAxB5B,IAAwB,uEAAjB,EAAiB,CAAA;;EAAA,EAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAV8B,QAAU,GAAA,IAAA,KAAA,CAAA,IAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;MAAVA,QAAU,CAAA,IAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,GAAA;;IAClD,OAAOoG,KAAK,CAACtG,GAAD,EAAM5B,IAAN,EAAYA,IAAI,CAACa,GAAjB,EAAsBiB,QAAtB,CAAZ,CAAA;EACD;;;EAGD,SAASyI,UAAT,CAAoBhI,IAApB,EAA0B;IACxB,OAAO2F,KAAK,CAAChD,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkCA,SAAlC,EAA6C3C,IAA7C,CAAZ,CAAA;EACD;;;EAGD,SAAS2F,KAAT,CAAetG,GAAf,EAAoB5B,IAApB,EAA0Ba,GAA1B,EAA+BiB,QAA/B,EAAyCS,IAAzC,EAA+C;IAC7C,OAAO;EACLX,IAAAA,GAAG,EAAHA,GADK;EAEL5B,IAAAA,IAAI,EAAJA,IAFK;EAGLa,IAAAA,GAAG,EAAHA,GAHK;EAILiB,IAAAA,QAAQ,EAARA,QAJK;EAKLS,IAAAA,IAAI,EAAJA,IAAAA;KALF,CAAA;EAOD;;EC9CD,SAAStB,GAAT,CAAaL,OAAb,EAAsB;EACpB;IACA,IAAKkJ,CAAAA,KAAL,CAAWlJ,OAAX,CAAA,CAAA;EACD,CAAA;;EAEDiJ,SAAS,CAAC5I,GAAD,CAAT,CAAA;EACAwI,cAAc,CAACxI,GAAD,CAAd,CAAA;EACAkJ,WAAW,CAAClJ,GAAD,CAAX,CAAA;EACAD,WAAW,CAACC,GAAD,CAAX;;;;;;;;"}