{"version":3,"file":"vue.js","sources":["../src/compile/parseAst.js","../src/compile/generate.js","../src/compile/index.js","../src/utils/index.js","../src/global-api/index.js","../src/observe/dep.js","../src/observe/arr.js","../src/observe/index.js","../src/utils/nextTick.js","../src/observe/watcher.js","../src/initState.js","../src/vnode/patch.js","../src/lifecycle.js","../src/init.js","../src/vnode/index.js","../src/index.js"],"sourcesContent":["// 标签名\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\n// <span:xx>\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\n// 开始标签\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\n// 结束标签\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\n// 属性  第一个分组是属性的key  value在分组 3/4/5中\r\nconst attribute =\r\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\n// <br/>\r\nconst startTagClose = /^\\s*(\\/?)>/\r\n// {{}}\r\nexport const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\nexport function parseHTML(html) {\r\n  // 创建一个ast对象\r\n  function createASTElement(tag, attrs) {\r\n    return {\r\n      tag, //元素\r\n      attrs, //属性\r\n      children: [], //子节点\r\n      type: 1, //元素类型(标签 1)\r\n      parent: null\r\n    }\r\n  }\r\n\r\n  let root //根元素\r\n  let currentParent //当前的父亲\r\n  let stack = []\r\n\r\n  function start(tag, attrs) {\r\n    // 开始标签\r\n    // console.log('开始标签', tag, attrs)\r\n    let element = createASTElement(tag, attrs)\r\n    if (!root) {\r\n      root = element\r\n    }\r\n    currentParent = element\r\n    stack.push(element)\r\n  }\r\n  function charts(text) {\r\n    // 文本\r\n    // console.log('文本', text)\r\n    text = text.replace(/\\s/g, '')\r\n    if (text) {\r\n      currentParent.children.push({\r\n        type: 3, //元素类型(文本 3)\r\n        text\r\n      })\r\n    }\r\n  }\r\n  function end(tag) {\r\n    // 结束标签\r\n    // console.log('结束标签', tag)\r\n    let element = stack.pop()\r\n    currentParent = stack[stack.length - 1]\r\n\r\n    if (currentParent) {\r\n      element.parent = currentParent.tag\r\n      currentParent.children.push(element)\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    // 判断标签\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      // 1) 开始标签\r\n      const startTagMatch = parseStartTag()\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      // 2) 结束标签\r\n      let endTagMatch = html.match(endTag)\r\n      // console.log(endTagMatch)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n    }\r\n    // 文本\r\n    let text\r\n    if (textEnd > 0) {\r\n      // console.log(textEnd)\r\n      // 获取文本内容\r\n      text = html.substring(0, textEnd)\r\n      charts(text)\r\n      // console.log(text)\r\n    }\r\n    if (text) {\r\n      advance(text.length)\r\n    }\r\n  }\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      // console.log(start)\r\n      // 创建ast语法树\r\n      let match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      // 删除开始标签 <div\r\n      advance(start[0].length)\r\n      let attr, end\r\n      // 处理属性\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        })\r\n        // 删除属性\r\n        advance(attr[0].length)\r\n        // break\r\n      }\r\n      if (end) {\r\n        // 删掉 >\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n  function advance(n) {\r\n    html = html.substring(n)\r\n    // console.log(html)\r\n  }\r\n  // console.log(root)\r\n  return root\r\n}\r\n","/**\r\n *\r\n * <div id=\"app\" class=\"add num\">xin {{msg}}<span>988</span></div>\r\n * _c(div,{id:app},_v('xin' + _s(msg)),_c)\r\n *\r\n *\r\n */\r\n\r\nimport { defaultTagRE } from './parseAst'\r\n\r\n// 处理属性\r\nfunction genPorps(attrs) {\r\n  // console.log(attrs)\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i]\r\n    if (attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').forEach((item) => {\r\n        if (item) {\r\n          let [key, value] = item.split(':')\r\n          obj[key] = value\r\n        }\r\n      })\r\n      // style=\"color:#f00;font-size:20px;\"\r\n      //          ||\r\n      // {color: '#f00', font-size: '20px'}\r\n      attr.value = obj\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`\r\n}\r\n// 处理子节点\r\nfunction genChildren(ast) {\r\n  let children = ast.children\r\n  if (children) {\r\n    return children.map((child) => gen(child)).join(',')\r\n  }\r\n  return null\r\n}\r\nfunction gen(node) {\r\n  // 文本 或者 标签\r\n  if (node.type === 1) {\r\n    // 标签\r\n    return generate(node)\r\n  } else if (node.type === 3) {\r\n    // 文本  （纯文本和插值表达式）\r\n    let text = node.text\r\n    if (!defaultTagRE.test(text)) {\r\n      // 没有插值的纯文本\r\n      return `_v(${JSON.stringify(text)})`\r\n    } else {\r\n      // 有插值表达式\r\n      let tokens = []\r\n      let lastIndex = (defaultTagRE.lastIndex = 0)\r\n      let match\r\n      while ((match = defaultTagRE.exec(text))) {\r\n        // console.log('match', match)\r\n        let index = match.index\r\n        if (index > lastIndex) {\r\n          // 添加内容\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length\r\n      }\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n      }\r\n      // console.log(tokens)\r\n      return `_v(${tokens.join('+')})`\r\n    }\r\n  }\r\n}\r\n\r\nexport function generate(ast) {\r\n  let children = genChildren(ast)\r\n\r\n  let code = `_c('${ast.tag}',${\r\n    ast.attrs.length ? `${genPorps(ast.attrs)}` : undefined\r\n  },${children})`\r\n  // console.log(code)\r\n  return code\r\n}\r\n","import { generate } from './generate'\r\nimport { parseHTML } from './parseAst'\r\n\r\nexport function compileToFunction(el) {\r\n  // console.log(el)\r\n  // 1） 将HTML 变成 ast语法树\r\n  let ast = parseHTML(el)\r\n  // console.log('ast', ast)\r\n  // 2） 将ast语法树变成render函数\r\n  // _c 元素 _v 文本 _s 是表达式\r\n  // 2-1)ast语法树变成字符串\r\n  let code = generate(ast)\r\n  // console.log('code', code)\r\n  // 2-2)字符串变成函数\r\n  let render = new Function(`with(this){return ${code}}`)\r\n  console.log('render', render)\r\n  return render\r\n}\r\n","export const HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestory',\r\n  'destroyed'\r\n]\r\n// 策略模式\r\nlet starts = {}\r\n\r\nstarts.data = function (parentVal, childVal) {\r\n  // 合并data\r\n  return childVal\r\n}\r\n// starts.computed = function () {\r\n//   // 合并computed\r\n// }\r\n// starts.watch = function () {\r\n//   // 合并watch\r\n// }\r\nstarts.components = function (parentVal, childVal) {\r\n  const res = Object.create(parentVal)\r\n  if (childVal) {\r\n    for (let key in childVal) {\r\n      res[key] = childVal[key] //返回的是构造的对象 可以拿到父亲原型上的属性 并且将儿子的都拷贝到自己身上\r\n    }\r\n  }\r\n  return res\r\n}\r\n\r\nHOOKS.forEach((hooks) => {\r\n  starts[hooks] = mergeHook\r\n})\r\n\r\nfunction mergeHook(parentVal, childVal) {\r\n  // console.log(parentVal, childVal)\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal)\r\n    } else {\r\n      return [childVal]\r\n    }\r\n  } else {\r\n    return parentVal\r\n  }\r\n}\r\n\r\nexport function mergeOptions(parent, child) {\r\n  // 合并对象\r\n  console.log(parent, child)\r\n  const options = {}\r\n  // 父亲\r\n  for (let key in parent) {\r\n    mergeField(key)\r\n  }\r\n  // 儿子有\r\n  for (let key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key)\r\n    }\r\n  }\r\n  function mergeField(key) {\r\n    // 策略模式\r\n    if (starts[key]) {\r\n      options[key] = starts[key](parent[key], child[key])\r\n    } else {\r\n      options[key] = child[key] || parent[key]\r\n    }\r\n  }\r\n  // console.log('options', options)\r\n  return options\r\n}\r\n","import { mergeOptions } from '../utils/index'\r\n\r\nexport function initGlobApi(Vue) {\r\n  // created:[a,b,c]\r\n  // watch:[a,b]\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin) {\r\n    // console.log(this)\r\n    // 对象的合并\r\n    // console.log(Vue.options)\r\n    // console.log(mixin)\r\n    this.options = mergeOptions(this.options, mixin)\r\n    // console.log(this.options)\r\n    return this\r\n  }\r\n  // 放全局组件的映射关系\r\n  Vue.options.components = {}\r\n  Vue.component = function (id, componentDef) {\r\n    componentDef.name = componentDef.name || id\r\n    // Vue 创建组件的核心 Vue.extend()\r\n    componentDef = Vue.extend(componentDef)\r\n\r\n    Vue.options.components[id] = componentDef\r\n    console.log(this.options)\r\n  }\r\n  // 创建子类 初始化子组件  继承父组件中的属性\r\n  Vue.extend = function (options) {\r\n    let spuer = this\r\n    function Sub(opts = {}) {\r\n      this._init(opts)\r\n    }\r\n    // 子组件继承父组件\r\n    Sub.prototype = Object.create(Vue.prototype)\r\n    // 将子组件中的this指向Sub\r\n    Sub.prototype.constructor = Sub\r\n    // 将父组件中的属性合并\r\n    Sub.options = mergeOptions(Vue.options, options)\r\n    // console.log(spuer.options, options)\r\n    console.log(Sub.options)\r\n    return Sub\r\n  }\r\n}\r\n","let id = 0\r\nclass Dep {\r\n  constructor() {\r\n    this.id = id++\r\n    this.subs = []\r\n  }\r\n  // 让watcher收集dep\r\n  depend() {\r\n    // this.subs.push(Dep.target)\r\n    Dep.target.addDep(this)\r\n  }\r\n  // dep收集watcher\r\n  addWatcher(watcher) {\r\n    this.subs.push(watcher)\r\n  }\r\n  // 更新\r\n  notify() {\r\n    this.subs.forEach((watcher) => watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null\r\n// 添加watcher\r\nlet stack = [] //栈\r\nexport function pushTarget(watcher) {\r\n  Dep.target = watcher\r\n  //watcher 入栈\r\n  stack.push(watcher) //渲染watcher 计算属性watcher\r\n}\r\n// 取消watcher\r\nexport function popTarget() {\r\n  // Dep.target = null\r\n  stack.pop()\r\n  Dep.target = stack[stack.length - 1]\r\n}\r\n\r\nexport default Dep\r\n","// 重写数组方法\r\n\r\n// 1) 获取原来数组的方法\r\nlet oldArrayProtoMethods = Array.prototype\r\n// 2) 继承\r\nexport let ArrayMethods = Object.create(oldArrayProtoMethods)\r\n// 3）函数劫持\r\nlet methods = ['push', 'pop', 'unshift', 'shift', 'splice', 'sort', 'reverse']\r\n\r\nmethods.forEach((method) => {\r\n  ArrayMethods[method] = function (...args) {\r\n    // console.log('数组劫持', args)\r\n    const result = oldArrayProtoMethods[method].apply(this, args)\r\n    // 对数组中新增的数据 进行劫持\r\n    let inserted //新增的内容\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    let ob = this.__ob__\r\n    if (inserted) {\r\n      // 对新增的内容进行劫持\r\n      ob.observeArray(inserted)\r\n    }\r\n    ob.dep.notify()\r\n    return result\r\n  }\r\n})\r\n","import { ArrayMethods } from './arr'\r\nimport Dep from './dep'\r\nexport function observer(data) {\r\n  if (typeof data !== 'object' || data === null) {\r\n    // data不是对象或者data为空 不劫持\r\n    return data\r\n  }\r\n\r\n  // console.log('劫持data:', data)\r\n  return new Observer(data)\r\n}\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    // console.log('value', value)\r\n    this.dep = new Dep()\r\n    // 给 value 添加一个属性\r\n    Object.defineProperty(value, '__ob__', {\r\n      enumerable: false, //不可枚举\r\n      value: this\r\n    })\r\n    // value.__ob__ = this //副作用 给数据加了一个标识上有__ob__ 则说明这个属性被观测过\r\n\r\n    // 判断是不是数组\r\n    if (Array.isArray(value)) {\r\n      console.log('数组', value)\r\n      // 重写数组 的部分方法\r\n      value.__proto__ = ArrayMethods\r\n      // 数组里面包含对象\r\n      this.observeArray(value) //[{a:1}]\r\n    } else {\r\n      this.walk(value)\r\n    }\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data)\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i]\r\n      const value = data[key]\r\n      // 对每一个属性进行劫持\r\n      defineReactive(data, key, value)\r\n    }\r\n  }\r\n  observeArray(arr) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      observer(arr[i])\r\n    }\r\n  }\r\n}\r\n// 对对象中的属性进行劫持\r\nfunction defineReactive(data, key, value) {\r\n  let childDep = observer(value) //深度递归劫持\r\n  let dep = new Dep() //给每个属性添加一个dep\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // console.log('childDep', childDep)\r\n      // console.log('获取', key)\r\n      // 收集依赖\r\n      if (Dep.target) {\r\n        dep.depend()\r\n        // 让数组和对象本身也实现依赖收集\r\n        if (childDep.dep) {\r\n          childDep.dep.depend()\r\n        }\r\n      }\r\n      // console.log(dep)\r\n      return value\r\n    },\r\n    set(newVal) {\r\n      // console.log('设置', newVal)\r\n      if (newVal === value) return\r\n      observer(newVal) //对设置的值 进行劫持\r\n      value = newVal\r\n      // 触发更新\r\n      dep.notify()\r\n    }\r\n  })\r\n}\r\n","let callbacks = []\r\nlet waiting = false\r\nfunction flushCallbacks() {\r\n  let cbs = callbacks.slice(0)\r\n  waiting = false\r\n  callbacks = []\r\n  cbs.forEach((cb) => cb())\r\n}\r\nlet timerFunc\r\n// nextTick 内部没有直接使用setTimeout 而是采用优雅降级的方式\r\n// 内部先采用promise (ie不兼容)\r\n// MutationObserver\r\n// 考虑IE专享的 setImmediate\r\n// 实在不行 就用 setTimeout\r\nif (Promise) {\r\n  timerFunc = () => {\r\n    Promise.resolve().then(flushCallbacks)\r\n  }\r\n} else if (MutationObserver) {\r\n  let observer = new MutationObserver(flushCallbacks)\r\n  let textNode = document.createTextNode(1)\r\n  observer.observe(textNode, {\r\n    characterData: true\r\n  })\r\n  timerFunc = () => {\r\n    textNode.textContent = 2\r\n    // 1 变 2    flushCallbacks执行\r\n  }\r\n} else if (setImmediate) {\r\n  timerFunc = () => {\r\n    setImmediate(flushCallbacks)\r\n  }\r\n} else {\r\n  timerFunc = () => {\r\n    setTimeout(flushCallbacks, 0)\r\n  }\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  // cb  有 vue更新的 也 有用户的\r\n  // console.log(cb)\r\n  callbacks.push(cb)\r\n  if (!waiting) {\r\n    // setTimeout(flushCallbacks, 0)\r\n    timerFunc() //兼容\r\n    waiting = true\r\n  }\r\n}\r\n","import { nextTick } from '../utils/nextTick'\r\nimport { popTarget, pushTarget } from './dep'\r\nlet id = 0\r\nclass watcher {\r\n  constructor(vm, updateComponent, cb, options) {\r\n    this.vm = vm\r\n    this.exprOrfn = updateComponent\r\n    this.cb = cb\r\n    this.options = options\r\n    // computed\r\n    this.lazy = options.lazy //watcher有lazy说明是计算属性\r\n    this.dirty = this.lazy\r\n    this.id = id++\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    // console.log(this.exprOrfn)\r\n    if (typeof this.exprOrfn === 'function') {\r\n      this.getter = this.exprOrfn //更新视图\r\n    } else if (typeof this.exprOrfn === 'string') {\r\n      // watch\r\n      // console.log(vm)\r\n      this.getter = function () {\r\n        let path = this.exprOrfn.split('.')\r\n        let obj = vm\r\n        for (let i = 0; i < path.length; i++) {\r\n          // console.log(path[i], vm[path[i]])\r\n          obj = obj[path[i]]\r\n        }\r\n        // console.log(obj)\r\n        return obj\r\n      }\r\n    }\r\n    this.value = this.lazy ? void 0 : this.get() //保持watch的初始值\r\n    this.user = options.user //watch用到：标识是不是用户自己的watcher\r\n  }\r\n  run() {\r\n    let oldVal = this.value\r\n    let newVal = this.get()\r\n    this.value = newVal\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newVal, oldVal)\r\n    }\r\n  }\r\n  // 初次渲染\r\n  get() {\r\n    pushTarget(this) //给dep添加watcher\r\n    const value = this.getter.call(this.vm) //渲染页面\r\n    popTarget() //给dep取消watcher\r\n    return value\r\n  }\r\n  // wather dep 相互关联\r\n  addDep(dep) {\r\n    let id = dep.id\r\n    if (!this.depsId.has(id)) {\r\n      this.deps.push(dep)\r\n      this.depsId.add(id)\r\n      dep.addWatcher(this)\r\n    }\r\n  }\r\n  // 更新\r\n  update() {\r\n    // this.getter()\r\n    // 多次调用update 只执行一次 缓存\r\n    if (this.lazy) {\r\n      // 计算属性\r\n      this.dirty = true\r\n    } else {\r\n      queueWatcher(this)\r\n    }\r\n  }\r\n  // 计算属性\r\n  evaluate() {\r\n    this.value = this.get()\r\n    this.dirty = false\r\n  }\r\n  depend() {\r\n    let i = this.deps.length\r\n    while (i--) {\r\n      // 让计算属性watcher也收集渲染watcher\r\n      this.deps[i].depend()\r\n    }\r\n  }\r\n}\r\n\r\n// 将需要批量更新的watcher存放到队列中\r\nlet queue = []\r\nlet has = {}\r\nlet pending = false\r\nfunction flushWatcher() {\r\n  queue.slice(0).forEach((watcher) => {\r\n    watcher.run()\r\n    // watcher.cb()\r\n  })\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\nfunction queueWatcher(watcher) {\r\n  let id = watcher.id\r\n  // console.log(id)\r\n  if (!has[id]) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    if (!pending) {\r\n      pending = true\r\n      /*     setTimeout(() => {\r\n        queue.forEach((watcher) => watcher.run())\r\n        queue = []\r\n        has = {}\r\n        pending = false\r\n      }) */\r\n\r\n      nextTick(flushWatcher)\r\n    }\r\n  }\r\n}\r\n\r\nexport default watcher\r\n","import Dep from './observe/dep'\r\nimport { observer } from './observe/index'\r\nimport watcher from './observe/watcher'\r\nimport { nextTick } from './utils/nextTick'\r\nexport function initState(vm) {\r\n  let ops = vm.$options\r\n  // console.log('ops', ops)\r\n  if (ops.data) {\r\n    initData(vm)\r\n  }\r\n  if (ops.props) {\r\n    initProps()\r\n  }\r\n  if (ops.watch) {\r\n    initWatch(vm)\r\n  }\r\n  if (ops.computed) {\r\n    initComputed(vm)\r\n  }\r\n  if (ops.methods) {\r\n    initMethods()\r\n  }\r\n}\r\n\r\nfunction initData(vm) {\r\n  // console.log('vm:data初始化', vm)\r\n  let data = vm.$options.data\r\n  // 对象或者函数\r\n  if (typeof data === 'object' && data !== null) {\r\n    data = data\r\n  } else if (typeof data === 'function') {\r\n    data = data.call(vm)\r\n  } else {\r\n    console.error('data type error')\r\n    return false\r\n  }\r\n  vm._data = data\r\n\r\n  // 将data上的属性代理到实例上 vm.msg = vm._data.msg\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n  // 对data数据进行劫持\r\n  observer(data)\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newVal) {\r\n      vm[source][key] = newVal\r\n    }\r\n  })\r\n}\r\n\r\nfunction initProps() {}\r\nfunction initWatch(vm) {\r\n  let watch = vm.$options.watch\r\n  console.log(watch)\r\n  for (let key in watch) {\r\n    let handler = watch[key]\r\n    // handler  可能是数组对象字符 函数\r\n    if (Array.isArray(handler)) {\r\n      // 数组\r\n      handler.forEach((item) => createrWatcher(vm, key, item))\r\n    } else {\r\n      // 对象字符串函数\r\n      createrWatcher(vm, key, handler)\r\n    }\r\n  }\r\n}\r\n\r\n// vm.$watch(()=>{return \"a\"}) //返回的值就是watcher上的属性\r\nfunction createrWatcher(vm, exprOrfn, handler, options) {\r\n  if (typeof handler === 'object') {\r\n    options = handler\r\n    handler = handler.handler\r\n  } else if (typeof handler === 'string') {\r\n    handler = vm[handler]\r\n  }\r\n  // 最终都交给$watch处理\r\n  return vm.$watch(exprOrfn, handler, options)\r\n}\r\n\r\nfunction initComputed(vm) {\r\n  let computed = vm.$options.computed\r\n  // console.log(computed)\r\n  let myWatcher = (vm._computedWatchers = {})\r\n  for (let key in computed) {\r\n    let userDef = computed[key]\r\n    // computed 有可能是对象 或者方法\r\n    let getter = typeof userDef === 'function' ? userDef : userDef.get\r\n    myWatcher[key] = new watcher(vm, getter, () => {}, { lazy: true })\r\n    defineComputed(vm, key, userDef)\r\n  }\r\n}\r\n\r\nlet sharePropDefinition = {}\r\n\r\nfunction defineComputed(target, key, userDef) {\r\n  sharePropDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: () => {},\r\n    set: () => {}\r\n  }\r\n  if (typeof userDef === 'function') {\r\n    // sharePropDefinition.get = userDef\r\n    sharePropDefinition.get = createComputedGetter(key)\r\n  } else {\r\n    // sharePropDefinition.get = userDef.get\r\n    sharePropDefinition.get = createComputedGetter(key)\r\n    sharePropDefinition.set = userDef.set\r\n  }\r\n  Object.defineProperty(target, key, sharePropDefinition)\r\n}\r\nfunction createComputedGetter(key) {\r\n  return function () {\r\n    let watcher = this._computedWatchers[key]\r\n    if (watcher) {\r\n      if (watcher.dirty) {\r\n        // 执行 computed\r\n        // 如果数据是脏的 就去执行用户传入的函数\r\n        watcher.evaluate()\r\n      }\r\n      //计算属性出栈后 还有渲染watcher 执行\r\n      if (Dep.target) {\r\n        watcher.depend()\r\n      }\r\n      return watcher.value\r\n    }\r\n  }\r\n}\r\nfunction initMethods() {}\r\n\r\nexport function stateMixin(vm) {\r\n  vm.prototype.$nextTick = function (cb) {\r\n    nextTick(cb)\r\n  }\r\n  vm.prototype.$watch = function (exprOrfn, handler, options) {\r\n    // console.log(exprOrfn, handler, options)\r\n    new watcher(this, exprOrfn, handler, { ...options, user: true })\r\n    if (options && options.immediate) {\r\n      // immediate 立即执行\r\n      handler.call(vm)\r\n    }\r\n  }\r\n}\r\n","export function patch(oldVnode, vnode) {\r\n  // console.log(oldVnode)\r\n  // console.log(vnode)\r\n  if (!oldVnode) {\r\n    return createEl(vnode)\r\n  }\r\n  if (oldVnode.nodeType === 1) {\r\n    // vnode ->真实dom\r\n    // 1）创建新dom\r\n    let el = createEl(vnode)\r\n    // console.log(el)\r\n    // 2) 新dom替换旧dom\r\n    let parentEL = oldVnode.parentNode\r\n    parentEL.insertBefore(el, oldVnode.nextsibling)\r\n    parentEL.removeChild(oldVnode)\r\n    return el\r\n  } else {\r\n    patchVnode(oldVnode, vnode)\r\n    // diff\r\n  }\r\n}\r\nfunction patchVnode(oldVnode, vnode) {\r\n  // // 新老节点不相同 直接用新的替换掉老的\r\n  if (!isSameVnode(oldVnode, vnode)) {\r\n    let el = createEl(vnode)\r\n    oldVnode.el.parentNode.replaceChild(el, oldVnode.el)\r\n    return el\r\n  } else {\r\n    /*新老节点相同*/\r\n    let el = (vnode.el = oldVnode.el)\r\n    // console.log(el)\r\n\r\n    if (!oldVnode.tag) {\r\n      // 文本\r\n      if (oldVnode.text !== vnode.text) {\r\n        el.textContent = vnode.text\r\n      }\r\n    }\r\n    patchProps(el, oldVnode.data, vnode.data)\r\n    let oldChildren = oldVnode.children || []\r\n    let newChildren = vnode.children || []\r\n    // console.log(oldVnode, vnode)\r\n    if (oldChildren.length > 0 && newChildren.length > 0) {\r\n      // 完整的diff\r\n      updateChildren(el, oldChildren, newChildren)\r\n    } else if (newChildren.length > 0) {\r\n      // 老的没有  新的有儿子\r\n      // mountChildren(el, newChildren)\r\n      for (let i = 0; i < newChildren.length; i++) {\r\n        let child = newChildren[i]\r\n        el.appendChild(createEl(child))\r\n      }\r\n    } else if (oldChildren.length > 0) {\r\n      // 新的没有 老的有 要删除\r\n      // unmountChildren(el, oldChildren)\r\n      el.innerHTML = ''\r\n    }\r\n    // console.log(oldChildren, newChildren)\r\n    return el\r\n  }\r\n}\r\n\r\nfunction updateChildren(el, oldChildren, newChildren) {\r\n  console.log(el, oldChildren, newChildren)\r\n  let oldStartIndex = 0\r\n  let newStartIndex = 0\r\n\r\n  let oldEndIndex = oldChildren.length - 1\r\n  let newEndIndex = newChildren.length - 1\r\n\r\n  let oldStartVnode = oldChildren[0]\r\n  let newStartVnode = newChildren[0]\r\n\r\n  let oldEndVnode = oldChildren[oldEndIndex]\r\n  let newEndVnode = newChildren[newEndIndex]\r\n\r\n  function makeIndexByKey(children) {\r\n    let map = {}\r\n    children.forEach((child, index) => {\r\n      map[child.key] = index\r\n    })\r\n    return map\r\n  }\r\n\r\n  let map = makeIndexByKey(oldChildren)\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    if (isSameVnode(oldStartVnode, newStartVnode)) {\r\n      // 头头比对\r\n      patchVnode(oldStartVnode, newStartVnode)\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n      newStartVnode = newChildren[++newStartIndex]\r\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) {\r\n      // 尾尾比对\r\n      patchVnode(oldEndVnode, newEndVnode)\r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n      newEndVnode = newChildren[--newEndIndex]\r\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) {\r\n      // 交叉比对(尾头)  abcd => dabc\r\n      patchVnode(oldEndVnode, newStartVnode)\r\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el)\r\n\r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n      newStartVnode = newChildren[++newStartIndex]\r\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\r\n      // 交叉比对(头尾)  abcd => dcba\r\n      patchVnode(oldStartVnode, newEndVnode)\r\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling)\r\n\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n      newEndVnode = newChildren[--newEndIndex]\r\n    } else {\r\n      // 乱序比对\r\n      // 根据老的列表做一个映射关系 用新的去老的里面找 找到则移动 找不到则添加 最后多余的删除\r\n      let moveIndex = map[newStartVnode.key]\r\n      if (moveIndex === undefined) {\r\n        // 找不到则添加\r\n        el.insertBefore(createElm(newStartVnode), oldStartVnode.el)\r\n      } else {\r\n        // 找到则移动\r\n        let moveVnode = oldChildren[moveIndex] // 找到对应的虚拟节点\r\n        el.insertBefore(moveVnode.el, oldStartVnode.el) //\r\n        oldChildren[moveIndex] = undefined //标识这个节点已经移动了\r\n        patchVnode(moveVnode, newStartVnode) //对比属性和子节点\r\n      }\r\n      newStartVnode = newChildren[++newStartIndex] //移动指针\r\n    }\r\n  }\r\n  // ab => abc     abc=>dabc\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      let childEl = createEl(newChildren[i])\r\n      // el.appendChild(childEl)\r\n      let anchor = newChildren[newEndIndex + 1]\r\n        ? newChildren[newEndIndex + 1].el\r\n        : null //获取下一个元素 可能没有\r\n      el.insertBefore(childEl, anchor)\r\n    }\r\n  }\r\n  // abcd=>abc abc=>bc\r\n  // console.log(oldStartIndex, oldEndIndex)\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n      if (oldChildren[i]) {\r\n        let childEl = oldChildren[i].el\r\n        el.removeChild(childEl)\r\n      }\r\n    }\r\n  }\r\n}\r\n// 判断两个虚拟节点是不是同一个\r\nfunction isSameVnode(vnode1, vnode2) {\r\n  return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key\r\n}\r\n\r\n// 创建dom\r\nexport function createEl(vnode) {\r\n  let { vm, tag, children, key, data, text } = vnode\r\n  if (typeof tag === 'string') {\r\n    if (createComponent(vnode)) {\r\n      // 是组建\r\n      // 组件  vnode上就有了 componentInstance.$el\r\n      return vnode.componentInstance.$el\r\n    } else {\r\n      // 是标签  创建元素\r\n      vnode.el = document.createElement(tag)\r\n\r\n      patchProps(vnode.el, {}, data)\r\n      if (children.length > 0) {\r\n        children.forEach((child) => {\r\n          vnode.el.appendChild(createEl(child))\r\n        })\r\n      }\r\n    }\r\n  } else {\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}\r\nfunction createComponent(vnode) {\r\n  let i = vnode.data\r\n  if ((i = i.hook) && (i = i.init)) {\r\n    i(vnode) //初始化组件\r\n  }\r\n  if (vnode.componentInstance) {\r\n    return true //说明是组件\r\n  }\r\n}\r\n\r\nexport function patchProps(el, oldProps = {}, props = {}) {\r\n  // 老的属性中有 新的没有 要删除老的  样式和其它属性\r\n  let oldStyles = oldProps.style || {}\r\n  let newStyles = props.style || {}\r\n\r\n  for (let key in oldStyles) {\r\n    if (!newStyles[key]) {\r\n      el.style[key] = ''\r\n    }\r\n  }\r\n  for (let key in oldProps) {\r\n    if (!props[key]) {\r\n      el.removeAttribute(key)\r\n    }\r\n  }\r\n  // 新的覆盖老的\r\n  // console.log('props', props)\r\n  for (let key in props) {\r\n    if (key === 'style') {\r\n      for (let styleName in props.style) {\r\n        el.style[styleName] = props.style[styleName]\r\n      }\r\n    } else {\r\n      el.setAttribute(key, props[key])\r\n    }\r\n  }\r\n}\r\n","import watcher from './observe/watcher'\r\nimport { patch } from './vnode/patch'\r\n\r\nexport function mounetComponent(vm, el) {\r\n  callHook(vm, 'beforeMount')\r\n\r\n  /* \r\n  //vm._render 1）将render函数 变成vnode\r\n  //vm._update 2）将vnode变成真实DOM 放到页面中\r\n  vm._update(vm._render()) \r\n  */\r\n  let updateComponent = () => {\r\n    vm._update(vm._render())\r\n  }\r\n  new watcher(\r\n    vm,\r\n    updateComponent,\r\n    () => {\r\n      callHook(vm, 'updated')\r\n    },\r\n    true\r\n  )\r\n\r\n  callHook(vm, 'mounted')\r\n}\r\n\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    // vnode变成真实DOM\r\n    let vm = this\r\n    // console.log(vnode)\r\n    // console.log(vm)\r\n    // 旧dom  虚拟dom\r\n    // vm.$el = patch(vm.$el, vnode)\r\n    let prevVnode = vm._vnode\r\n    if (prevVnode) {\r\n      //prevVnode 有值 说明第一次渲染过了\r\n      // 更新\r\n      vm.$el = patch(prevVnode, vnode)\r\n    } else {\r\n      // 初次渲染\r\n      vm.$el = patch(vm.$el, vnode)\r\n      vm._vnode = vnode\r\n    }\r\n  }\r\n}\r\n\r\n// 生命周期的调用\r\nexport function callHook(vm, hook) {\r\n  // console.log(vm)\r\n  const handlers = vm.$options[hook]\r\n  // console.log(hook)\r\n  // console.log(handlers)\r\n  if (handlers) {\r\n    for (let i = 0; i < handlers.length; i++) {\r\n      handlers[i].call(vm)\r\n    }\r\n  }\r\n}\r\n","import { compileToFunction } from './compile/index'\r\nimport { initState } from './initState'\r\nimport { callHook, mounetComponent } from './lifecycle'\r\nimport { mergeOptions } from './utils/index'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    // console.log('options', options)\r\n    let vm = this\r\n    // vm.$options = options\r\n    // console.log(Vue.options)\r\n    vm.$options = mergeOptions(this.constructor.options, options)\r\n    // console.log(vm.$options)\r\n    // callHook\r\n    callHook(vm, 'beforeCreate')\r\n    // 初始化状态\r\n    initState(vm)\r\n    callHook(vm, 'created')\r\n    // console.log(vm)\r\n    // 模板渲染\r\n    // console.log(vm.$options)\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    let vm = this\r\n    el = document.querySelector(el)\r\n    vm.$el = el\r\n    let options = vm.$options\r\n    if (!options.render) {\r\n      // 没有render\r\n      let template = options.template\r\n      if (!template) {\r\n        //没有template\r\n        if (el) {\r\n          // 获取HTML\r\n          el = el.outerHTML\r\n          // 先变成ast语法树 再转为redner函数\r\n          let render = compileToFunction(el)\r\n          // console.log(render)\r\n          options.render = render\r\n        }\r\n      }\r\n      // 挂载组件\r\n      mounetComponent(vm, el)\r\n    }\r\n  }\r\n}\r\n","const isReservedTag = (tag) => {\r\n  // 判断是原始标签还是自定义组件的标签\r\n  return ['a', 'div', 'li', 'button', 'ul', 'span', 'img', 'p'].includes(tag)\r\n}\r\n\r\nexport function renderMixin(Vue) {\r\n  Vue.prototype._c = function () {\r\n    // 标签\r\n    // 创建标签\r\n    // console.log(arguments)\r\n    return createElement(this, ...arguments)\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    // 文本\r\n    // 创建文本\r\n    return createText(this, text)\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    // 插值表达式\r\n    if (val) {\r\n      if (typeof val === 'object') {\r\n        return JSON.stringify(val)\r\n      }\r\n      return val\r\n    }\r\n    return ''\r\n  }\r\n  Vue.prototype._render = function () {\r\n    // 将render函数 变成vnode\r\n    let vm = this\r\n    let render = vm.$options.render\r\n    let vnode = render.call(vm)\r\n    // console.log('vnode', vnode)\r\n    return vnode\r\n  }\r\n}\r\n\r\n// 创建元素和组件\r\nfunction createElement(vm, tag, data = {}, ...children) {\r\n  if (isReservedTag(tag)) {\r\n    return vnode(vm, tag, data, data.key, children)\r\n  } else {\r\n    // 创建组件\r\n    console.log(vm)\r\n    const Ctor = vm.$options['components'][tag]\r\n\r\n    return createComponentVnode(vm, tag, data, children, Ctor)\r\n  }\r\n}\r\n\r\n// 创建组件的虚拟dom\r\nfunction createComponentVnode(vm, tag, data, children, Ctor) {\r\n  console.log(typeof Ctor)\r\n  if (Ctor && typeof Ctor === 'object') {\r\n    Ctor = vm.constructor.extend(Ctor)\r\n    console.log(Ctor)\r\n  }\r\n  data.hook = {\r\n    init(vnode) {\r\n      //稍后创建真实节点的时候 如果是组件则调用此方法\r\n      // 保存组件的实例到虚拟节点上\r\n      let instance = (vnode.componentInstance =\r\n        new vnode.componentOptions.Ctor())\r\n      instance.$mount() //实例上就会多一个$el\r\n    }\r\n  }\r\n  return vnode(\r\n    vm,\r\n    'vue-component' + tag,\r\n    data,\r\n    undefined,\r\n    undefined,\r\n    undefined,\r\n    {\r\n      Ctor,\r\n      children\r\n    }\r\n  )\r\n}\r\n\r\n// 创建文本\r\nfunction createText(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\n// 创建虚拟node\r\nfunction vnode(vm, tag, data, key, children, text, componentOptions) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n    componentOptions\r\n  }\r\n}\r\n","import { compileToFunction } from './compile/index'\r\nimport { initGlobApi } from './global-api/index'\r\nimport { initMixin } from './init'\r\nimport { stateMixin } from './initState'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport { renderMixin } from './vnode/index'\r\nimport { createEl, patch } from './vnode/patch'\r\n\r\nfunction Vue(options) {\r\n  // 初始化\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\nlifecycleMixin(Vue)\r\nrenderMixin(Vue)\r\ninitGlobApi(Vue)\r\nstateMixin(Vue) //给vm添加$nextTick\r\n\r\nexport default Vue\r\n/* \r\nwindow.onload = function () {\r\n  let render1 = compileToFunction(`<ul><li>2</li><li>3</li></ul>`)\r\n  let vm1 = new Vue({ data: { name: 'zx' } })\r\n  let prevVnode = render1.call(vm1)\r\n  let el = createEl(prevVnode)\r\n  // console.log(render1)\r\n  // console.log(prevVnode)\r\n  // console.log(el)\r\n  // console.log(document.body)\r\n  document.body.appendChild(el)\r\n  let render2 = compileToFunction(`<ul><li>1</li><li>2</li><li>3</li></ul>`)\r\n  let vm2 = new Vue({ data: { name: 'xm' } })\r\n  let nextVnode = render2.call(vm2)\r\n  // console.log(render2)\r\n  // console.log(nextVnode)\r\n  setTimeout(() => {\r\n    patch(prevVnode, nextVnode)\r\n  }, 3000)\r\n}\r\n */\r\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","parseHTML","html","createASTElement","tag","attrs","children","type","parent","root","currentParent","stack","start","element","push","charts","text","replace","end","pop","length","textEnd","indexOf","startTagMatch","parseStartTag","tagName","endTagMatch","match","advance","substring","attr","name","value","n","genPorps","str","i","obj","split","forEach","item","key","JSON","stringify","slice","genChildren","ast","map","child","gen","join","node","generate","test","tokens","lastIndex","exec","index","trim","code","undefined","compileToFunction","el","render","Function","console","log","HOOKS","starts","data","parentVal","childVal","components","res","Object","create","hooks","mergeHook","concat","mergeOptions","options","mergeField","hasOwnProperty","initGlobApi","Vue","mixin","component","id","componentDef","extend","Sub","opts","_init","prototype","constructor","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","oldArrayProtoMethods","Array","ArrayMethods","methods","method","args","result","apply","inserted","ob","__ob__","observeArray","dep","notify","observer","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","arr","childDep","get","depend","set","newVal","callbacks","waiting","flushCallbacks","cbs","cb","timerFunc","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","vm","updateComponent","exprOrfn","lazy","dirty","deps","depsId","Set","getter","path","user","oldVal","call","has","add","addWatcher","queueWatcher","queue","pending","flushWatcher","run","initState","ops","$options","initData","props","watch","initWatch","computed","initComputed","error","_data","proxy","source","handler","createrWatcher","$watch","myWatcher","_computedWatchers","userDef","defineComputed","sharePropDefinition","configurable","createComputedGetter","evaluate","stateMixin","$nextTick","immediate","patch","oldVnode","vnode","createEl","nodeType","parentEL","parentNode","insertBefore","nextsibling","removeChild","patchVnode","isSameVnode","replaceChild","patchProps","oldChildren","newChildren","updateChildren","appendChild","innerHTML","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVnode","newStartVnode","oldEndVnode","newEndVnode","makeIndexByKey","nextSibling","moveIndex","createElm","moveVnode","childEl","anchor","vnode1","vnode2","createComponent","componentInstance","$el","createElement","hook","init","oldProps","oldStyles","style","newStyles","removeAttribute","styleName","setAttribute","mounetComponent","callHook","_update","_render","lifecycleMixin","prevVnode","_vnode","handlers","initMixin","$mount","querySelector","template","outerHTML","isReservedTag","includes","renderMixin","_c","arguments","_v","createText","_s","val","Ctor","createComponentVnode","instance","componentOptions"],"mappings":"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"}